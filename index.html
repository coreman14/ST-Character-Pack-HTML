 <!DOCTYPE html>  <html lang="en">  <head>  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" >  <title>Class Swap Viewer</title>  <style>  body {  text-align: center;  }  #imageList2{  padding-top: 10px;  }  .outerDiv{  position: relative;  text-align: center;  }  .characterswrap{  display: flex;  flex-wrap: wrap;  justify-content: center; /* here we just put the only child div to the center */  background-color: White; /*Background Replace*/  }  .charactersrow{  display: flex;  flex-grow: 1;  flex-direction: column;  justify-content: center; /* here we just put the only child div to the center */  }  .character{  margin: 20px 10px 0 0;  padding: 0px 0px 14px 0px;  display: flex;  flex-wrap: wrap;  justify-content: center; /* here we just put the only child div to the center */  border-radius: 0.5px;  border-color: grey;  border-style: solid;  position: relative;  }  .character2,  .characterAccess{  margin: 10px 10px 0 0;  padding: 0px 0px;  display: flex;  flex-wrap: nowrap;  justify-content: center; /* here we just put the only child div to the center */  border-radius: 0.5px;  border-color: grey;  border-style: solid;  position: relative;  }  .accessoryElementSelection{  width: 200px;  justify-content: unset;  display: block;  }  .elementTableLine,  .elementHeaderLineAccessories,  .elementHeaderLineOutfit{  display: table;  }  .elementHeaderLineAccessories,  .elementHeaderLineOutfit{  font-size: 20px;  }  .characterAccess{  margin: 10px 2px 0 0;  }  .character2Container{  display: flex;  flex-wrap: wrap;  justify-content: center; /* here we just put the only child div to the center */  }  .character span,  .character2 span {  position: absolute;  background-color: grey;  color: White;  width: 100%;  line-break: anywhere;  font-size: 14px;  }  #changeBox{  position: absolute;  }  .characterImagesOutfitAccessoryViews,  .characterImagesOutfitMainViews{  position: relative;  padding-top: 20px;  left: 0px;  }  .characterImagesOutfitMainViews{  height: 200px;  }  .characterImagesOutfitAccessoryViews{  height: 400px;  }  .characterImagesAcessory{  position: absolute;  padding-top: 20px;  left: 0px;  }  .characterposename{  position: absolute;  left: 50%;  transform: translate(-50%, -21%);  z-index: 31;  background-color: grey;  color: White;  width: 100%;  }  #ToggleText{  /*Stolen From W3*/  width: 250px;  position: fixed;  top: 10px;  right: 60px;  font-size: 24px;  opacity: 0;  }  #ToggleText.fade{  /*Stolen From W3*/  opacity: 0;  animation: fade 6.25s linear;  }  @keyframes fade {  0%,  100% {  opacity: 0;  }  0% {  z-index: 6;  }  90% {  z-index: 4;  }  20%,  68% {  opacity: 1;  }  }  .rotateUp,  .rotateDown{  transition: all 0.75s ease-out;  position: relative;  }  .rotateUp{  transform: rotateX(180deg);  }  .rotateDownNoAnimation{  position: relative;  }  .hidden{  max-height: 0px;  }  .hidden,  .unhidden{  transition: all 0.75s ease-out;  overflow-y: hidden;  }  .unhiddennoanimation{  overflow-y: hidden;  }  #favDialog{  background-color: #8d8d8d;  color: #000000;  text-align: center;  border-radius: 15px;  padding: 8px 8px;  overflow: hidden;  border: #fff;  border-width: 6px;  border-style: solid;  max-width: 80%;  top: -230px;  }  #favDialog::backdrop {  background-color: rgba(0, 0, 0, 0.8);  }  #HelpTitle{  font-size: 48px;  display: block;  color: #fff;  }  .HelpLine{  display: block;  font-size: 24px;  }  .characterPageHelp{  display: block;  font-size: 24px;  color: #fff;  }  .boldenText{  font-weight: bold;  }  #backbutton{  display: inline-block;  vertical-align: sub;  padding-right: 3px;  height: 25px;  width: auto;  padding-top: 10px;  }  #infoButton{  display: inline-block;  vertical-align: sub;  padding-right: 3px;  height: 25px;  width: auto;  padding-top: 10px;  }  #title{  display: inline-block;  }  #titleExtra{  display: inline-block;  }  #infoButton:hover,  .navigationButton:hover,  #titleExtra:hover,  #title:hover {  filter: invert(0.6);  }  #backbutton:hover {  filter: invert(1);  }  #hideButton{  padding-top: 2px;  }  .navigationButton{  top: 0px;  position: fixed;  z-index: 5;  }  .navigationButton.leftButton{  left: 0px;  }  .navigationButton.rightButton{  right: 0px;  }  </style>  </head>  <body>  <div id="navigationButtons">  <a class="navigationButton leftButton"  ><img  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAwCAYAAABNPhkJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAQESURBVGhD5ZpJbE1RGMffQ/S9xsZ7ooZqaNU8xbwQEqzEVmJpSBBDDDGEhaVEEFIrFmqWsGQjtCQ2EiGR2GFhCgslpr5XrfL733Naw73n9b32yb2Xf/LPd8/pbdLf/b4z3HOb+BvKZLOL8F3ciR/iZfZHoStpY9kE3FLCGTzC6zB6jZe/a2l5YJrhqZ+NZRGwiwmn8K+w0nC8xFyGq7IBW9jTeJTXEVGVBRjYhYRG7IJ9g5vNZbjqMzCwCwjKbI3X4ddHvIPxe980w1WfJi0LexaP8Tr8+oQ3AHvRNMNXrzMM7HyCZmMX7Ae8JUqwUq+AgZ1HEGyt1+HXF7wdWN0TKZVc0hb2HK73OvxqxRujCCuVlGFgZxM0Zl2wGrPbogorFZ1hYGcSlNlJXodfOawyPmGa0VRRwMDOIiizLtg83grsSdOMrnosaWBnEFSiLliN2V1xgJUKZhjYaQSVsWKQ2vBuYBtMM/pyAhcB+xXvBPa4acZDgSUN7GSCytgFqzG7L26wkg8YWI1VwWrsBqkd7wf2iGnGS7+VtIVVGWsJCtI3vBfYQ6YZP3VnGNhxBGXWBavt4p44w0pehjOZTH0imVRmtW106TI+gPWQ+qsjRnpNol7pIklm64gXcCFYSUuQ1OPaHTHp732PD3YmEkcFfInGSv3kH5cm2xX905WV57kY4HX929IwfK906wjmf9EHAcdmW9hHvcRXNIZTXBzGm9Tr0Hf8BLfggeqIkbQSPcUNzNR3zLKUzVYQBL1ZbYeu43X80nOWsfhAJ5NKVgd/t+LPnZbN9DG83usI1lW8hl9+a5rxU/cGIpfLdaTT6WaeSBVN125rPB7HzN7E/XoPjp1+2zEB0Q7MTS4LQU/Agm6OI7Rvi+hlOpVqItMjabremARdp4fD/TrLio0C98S5fL49RXknDfR00+vTRDzGQuv9OBYKBJbyudxXjVUuq7ELWgcFtbovLtBOYAmILujReKrX6ZegayoqK2/wkLpeMCKrgsAS0G1A61OnoKd4nX5NZX2rZpZXeeusK7LqEVhSuTKmbzKm9S1JGQ3SdCY6Qau8I5vpooAlyjVv1+mxNF1n1IIebicyvY5FTkUDS0DkbHnrOEhLU5C0lA21E1nkoEsCloBotRNZIWhtWqpS3EdlRAq6ZGDJQivTWosFHqSZTGRDbHl32L7Q1StgyULf4lKTmOvzqT6vDrblrSPe0NVrYAmIz7a8C0HPxYNUEdzfabrCU5+AJQut8tZnGZ2ABmkOvse9j00zPJXlyJX3Y/1r4VqsbAdJD1bQoatsZ8xAvyCswi5o7yA8bJUNWAJaB2Wr8Z//dXcbXzOX4ar7iKecymSzwwjKtmbpR7iRh/GMGLISiR/Sjkbmi9CXxAAAAABJRU5ErkJggg=="  alt="Left button"  id="leftButton"  ></a>  <a class="navigationButton rightButton">  <img  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAwCAYAAABNPhkJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAQGSURBVGhD5ZpJaxRBGIZn3B1R44y7uIAePSkibnFXEETxIIiIxh3iCoLgL/DgQUVxRYMe3BA8CB5cQBA1bih68+YuOh33aMCMz9tVCRlT05kkA6nWF16q6kslzJOv1u5J+KJ0JrMAP8H1+C6ebn9UUiVt2aECbhzFZTwkDBi9wSuDbPaaaZZGnWzZ0ZqNm8JKQ/EJ/hmzTLM08gW4kIbjqlJC+wJ8A78z1WYS9Emgy02zfepsyw5VbW3t256plObsXNw9DOarL55Bn4f0fWFCbZMXwBIgzwASzDzsgu6HZ7YX2htgCZCnNtMzcY8wmC9BK9P36PvKhFonr4AlQJ4A9J7qHNwtDOZL0OX0uU/f1yZUvLwDlgB5DJBgNLy7hsF8ZfB0m+lWQXsJLNlMf6A6A7vmtKCV6bv01TQoSt4CS4A8AiigqoNJoUxPtdBvTShaXgNLgDy0mdaW1SUM5msAnkaf6mKgvQeWLPRnqhrerkwLegp9btO30AEmVCyAJUDuAfSNqo6ZrkwPxJMttFZ5p2IDLAFSbTOtOe367INwQ6ad0LEClmyma6nqbO3KtKAn0ecWfTX38xQ7YAmQOwDVUdWcdjEMxhNd0LEElgC5DdBPqprTrluf7tPNMh1bYMlCf6c6BbuOoXqooEzfpG9WgcZHPNw3h1H8/dTBd/3G9XgXXqpAAVUncrkVQRA8T5ZlMp0ZD9sJ7sQ6mOsPxEkNn9d1/Gyqarw8SWYXUbmAXRv6v6azmuzz8f8AKy0WsDby/0VfBKzh3KanBzHU/nCVZh5Po9iCR+OcYjGSDiC6Jo7BUS8WDuIdTbcl1buwfEf9kldim6njc4+gehRrLSqkA3hHkM3+ig2cS8D2pziBF4YBt47gbcDqVObHu6W2yMIew4vDgFvHGbFbGQk/bDueR0tgdeFvGZZ1CVjdrBoVuwwDm6YQ7JIw4FZVor6+Mqipacxsg1y3DG8FbBnFIRwFeyqXy21xwUqxAQZW53wtQFGXhNN4U00QfDXN5orFkOaC04fMHKa6zEScOoM3shp/MU23vM9wOp3uzYfUPhoFew5XtgQreZ1hYPskkknBrjARp84zZzcwjD/ZdqS8BWbO9qIQ7Kow4NZF9tn1bD16O1GUvBzSwKYo9uIo2Et4Y2tgJe+A+xnYfXhtGHBLsOuYsx9Ns3h5NaTJrF6CK7MbwoBb+nrTamCbPXMuRt5kGFg9k9qDo2CvYGW2TbCSF8DA6hHTblwZBtwSrDIb+bKsJfmSYb3p32yqTl3Fa9oLK/kCPAEXurldx4It6oV3S/IFuND3NAS7CtiXptl+eXEf7plKKXvj8agwYKRv51UAW9IHjN5sSyxcIykq8Fj8AFeVYs7mK5H4A8xPTiQK7Q/0AAAAAElFTkSuQmCC"  alt="Right button"  id="rightButton"  ></a>  </div>  <span id="ToggleText" class="popup"></span>  <!--We need to add a function that talks about the images not lining up properly when scaled-->  <dialog id="favDialog" onclick="event.target==this && this.close()">  <span  ><span id="HelpTitle">Character Viewer Shortcuts</span> <br>  <span class="HelpLine"><span class="boldenText">Backspace:</span> Return to previous page. </span><br>  <span class="HelpLine"  ><span class="boldenText">BackSlash:</span> Disable and enable the shortcuts below.</span  ><br><span class="HelpLine"  ><span class="boldenText">UpArrow:</span> Return to the character selection page.</span  >  <br><span class="HelpLine"  ><span class="boldenText">Left/Right Arrow:</span> Navigate through characters in alphabetical  order.</span  ><br><span class="HelpLine" id="PoseHelp"  ><span class="boldenText">Equals/Minus:</span> Increase or decrease how many poses a character must  have to be shown. This affects both the main character page and the left/right navigation.</span  ><br><span class="HelpLine" id="OutfitHelp"  ><span class="boldenText">Enter:</span> Toggle outfit view. On the main character page, this will  show all outfits instead of one per pose. Current status: </span  ><br><br id="renameCharacterBR1" ><span  class="HelpLine characterPageHelp"  id="renameCharacter1"  ></span  ><br id="renameCharacterBR2" ><span class="HelpLine characterPageHelp" id="renameCharacter2"></span  ></span>  </dialog>  <a id="backbutton"  ><img  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA4UlEQVR42mNgGAWjgAKQnZlZk5WV0TBwlmdm/AdjejsiKyMjB245vR0BtLwCaOFvNAd8z8pK9xgYn4McQ0fLR6LPszISsPj8c1ZWms1AWT6QPk9/P5A+pyrGV8Kl0NpyvA4ABvN6WluO1wENDQ0swGw3f8AcAAOZmRmzsWi8nZaWJkK3SgeHI+5nZGQo0K/my8zsxuaIrKwslYENiYyMx4MhJJ7npKeb0DEk0psxHZH+PictTYOeITF9wEMC1PxCdwQwdPrp2i4EWYiUIOeDCjC6t4zBIZGVMXlALB8FwwYAANeQ3GvAWTt8AAAAAElFTkSuQmCC"  title="Back to Main Page"  alt="Back button"  ></a>  <h1 id="titleExtra" href="#titleExtra">Text</h1>  <h1 id="title">Text</h1>  <div id="infoButton" onclick="popouthelp()">  <img  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAINSURBVFhHxZe7SgQxFIZH8VLYWNhY2AjiAyh4wcJCtLIRBF9AfAltBPUNxJfQXlAUtfRSC2IvCFoJ2uj/rfllZd2ZZNm4H/zJMJucc3ZykjlTdJqu0MfQJy1JC9KENCYNSvAqPUjX0ol0LH1IbQEn29Kz9BkpxjLHAbbMmvQk2fCttCnNS8NSbxDX3OM3xng8c7GRTI90INnQpTQnxcLYC8nzsYXNKBh4KDHxTVqXUnLFMGdDwga2sBkVhP/5izTDjSZsSWdBq9xoAjacP9guhfXyPy9zDnsSY1FZADAt+Uk0zQky1gnHY68iJQBgORiLjz93B9uGASRczJoPSCNBMWDzXMIHvn7BIeN1Ssn2VGYlfOALnz8sS/zAHs7NnYQvfBbdNILjFY5CH0NqDhi2IyzSOADOdrgKfU7sY5LGAfBigfvQ58Q+RmkcgLcFyZEb+6j5dAAdwwHwPoeh0OfEPmo+HQDFBIyHPif28UjjAKhkIOchZOzjhsYBnIZ+JfQ5sQ/Kth/6pdSjuJWDqOEo9hN4l/a/L4tdqZUCpAps7nxf1nw1FK0dfx1DfUFCEVFGSgBTUmVBYlySsU5lQcQGgHPnV2VJBrFFaVUAzGmpKAUG+kkgKhkyOBbGUqx6PraindfDejkx0b99mNRDxmb7NEvZ7/44pZKhmOB9bge8WDjbOV454dr6cZqRovgCfJ2xnbN9A/cAAAAASUVORK5CYII="  title="Shortcuts and Info"  alt="Info button"  >  </div>  <div id="hideDiv" class="unhidden">  <div id="imageList" class="characterswrap"></div>  <div class="character2Container" id="accessoryBuilder"></div>  </div>  <div id="hideButton">  <img  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAUBAMAAADSJhiXAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURWBgYP///w85EMkAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAXSURBVCjPY8ADGAVxgFGpYSSFCzAwAABZWxzDrkDX/gAAAABJRU5ErkJggg=="  id="changeBox"  alt="Box for arrow"  >  <img  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAUCAYAAAAgCAWkAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGhSURBVFhH7dY7KIVhHMfx41rkFhIGZHAZiBRKGWQwyEgGJZeiJCUiRgaLZMMmg41MCpsMisXAhEKJEiH3+P6U+vc66OBclF99hvOe8z7P/7zP+1xc//kj6cUMkl8/BWaCUYhZtOuCu6ThCs84RwdCEEhJwSgeoDr3kYh36YJ+YG2gBP5OFFpxCFvfJVrgNpXYgb3hCROIhz9SgVXYmjQyulaMTxOOAVzDNnCKJgTBF8nGNB5h69hFIzxKBhZgGxI9kXx4K3EYxAlsv2cYQSy+nRrswTasYdZEjMFvphZbsH3dYx55+JVEYhh3sB0doQ4/TREW4XyltADpYXolOViG7VCWkAVPo2V1HBew7ekhdSMaXk891KEt4BZDiMBX0SLShgPYNjTyk8iET6P5MgZ3q001Pko51uG8bwVl8GsKsAZbmGjSpuMtqdBRyTnvtLg0QPMyIKLzUjO0F9lCtVf1ow86ItnvbqBFJQkBmQRMQacGW7jTHHLhqw34RynFJpx/YhtVCMOfSig6oddLS28PvDovfDHMOrYrx9Do/OfruFwvjpSeW9iun1cAAAAASUVORK5CYII="  class="rotateUp"  id="changeArrow"  alt="Arrow for hiding"  >  </div>  <div id="imageList2"></div>  <script>  /* jshint esversion: 11, -W083*/ var new_name="";  function popouthelp() {  var dialog=document.getElementById("favDialog");  dialog.showModal();  }  function parseTextBool(textToParse) {  return textToParse=="true" ? true : false;  }  function makeUrlCompatible(url) {  return url.replace("#", "%23");  }  function getTextWidth(text, font) {  const canvas=getTextWidth.canvas || (getTextWidth.canvas=document.createElement("canvas"));  const context=canvas.getContext("2d");  context.font=font;  const metrics=context.measureText(text);  return metrics.width;  }  function compareDefaultAcc(a, b) {  a=parseInt(a.layer);  b=parseInt(b.layer);  if (a < b) {  return -1;  }  if (a > b) {  return 1;  }  return 0;  }  function getIndexOfOutfit(outfit, outfits) {  for (var i in outfits) {  if (outfits[i].path==outfit) {  return parseInt(i);  }  }  return -1;  }  function loadImages(sources, callback) {  var images={};  var loadedImages=0;  var numImages=0;  for (var _ in sources) {  numImages++;  }  for (var src in sources) {  images[src]=new Image();  images[src].onload=function () {  if (++loadedImages >= numImages) {  callback(images);  }  };  images[src].src=makeUrlCompatible(sources[src]);  }  }  function makeCharURL(namepose, urlToMend) {  var splitted=namepose.toString().split(",");  urlToMend.searchParams.set("character", splitted[0]);  urlToMend.searchParams.set("pose", splitted[1]);  }  function getLayeringOrderOutfits(out_start, outfit, outfits) {  var default_outfit=[].concat(out_start + outfit);  if (outfits.length > 0) {  var negativeOffset=0;  outfits.sort(compareDefaultAcc);  for (var src in outfits) {  outfits[src].path=out_start + outfits[src].path;  if (parseInt(outfits[src].layer) < 0) {  default_outfit.splice(  negativeOffset,  0,  [].concat(outfits[src].path, outfits[src].main_height)  );  negativeOffset++;  } else {  default_outfit.push([].concat(outfits[src].path, outfits[src].main_height));  }  }  }  return default_outfit;  }  function getLayeringOrderNotDefault(out_start, outfit, character_obj) {  var default_outfit=[].concat(out_start + outfit);  index_of_outfit=getIndexOfOutfit(outfit, character_obj.outfits);  if (character_obj.outfits[index_of_outfit].off_accessories.length > 0) {  var negativeOffset=0;  copy_of_accessories=[...character_obj.outfits[index_of_outfit].off_accessories];  copy_of_accessories.sort(compareDefaultAcc);  for (var src in copy_of_accessories) {  if (parseInt(copy_of_accessories[src].layer) < 0) {  default_outfit.splice(negativeOffset, 0, {  "path": copy_of_accessories[src].path,  "access_height": copy_of_accessories[src].access_height,  "name": copy_of_accessories[src].name,  });  negativeOffset++;  } else {  default_outfit.push({  "path": copy_of_accessories[src].path,  "access_height": copy_of_accessories[src].access_height,  "name": copy_of_accessories[src].name,  });  }  }  }  return default_outfit;  }  function getLayeringOrder(out_start, outfit, character_obj) {  var default_outfit=[].concat(out_start + outfit);  if (character_obj.default_accessories.length > 0) {  var negativeOffset=0;  character_obj.default_accessories.sort(compareDefaultAcc);  for (var src in character_obj.default_accessories) {  if (!character_obj.default_accessories[src].path.startsWith(out_start)) {  character_obj.default_accessories[src].path= out_start + character_obj.default_accessories[src].path;  }  if (parseInt(character_obj.default_accessories[src].layer) < 0) {  default_outfit.splice(  negativeOffset,  0,  [].concat(  character_obj.default_accessories[src].path,  character_obj.default_accessories[src].main_height  )  );  negativeOffset++;  } else {  default_outfit.push(  [].concat(  character_obj.default_accessories[src].path,  character_obj.default_accessories[src].main_height  )  );  }  }  }  return default_outfit;  }  function getLayeringOrderFlat(out_start, outfit, character_obj) {  var default_outfit=getLayeringOrder(out_start, outfit, character_obj);  for (var i=0; i < default_outfit.length; i++) {  if (Array.isArray(default_outfit[i])) {  default_outfit[i]=default_outfit[i][0];  }  }  return default_outfit;  }  function outputOutfitCopyString(outfit) {  if (selectedCharacter != null) {  navigator.clipboard.writeText("outfit " + body_name + " " + outfit);  document.getAnimations().forEach((animation) => {  animation.cancel();  });  document.querySelector("#ToggleText").textContent='Copied outfit "' + outfit + '" to clipboard';  setTimeout(function () {  document.querySelector("#ToggleText").classList.add("fade");  }, 6.25);  document.querySelector("#ToggleText").classList.remove("fade");  }  }  function outputFaceCopyString(face_name) {  if (selectedCharacter != null) {  navigator.clipboard.writeText("show " + body_name + " " + face_name);  document.getAnimations().forEach((animation) => {  animation.cancel();  });  document.querySelector("#ToggleText").textContent='Copied face "' + face_name + '" to clipboard';  setTimeout(function () {  document.querySelector("#ToggleText").classList.add("fade");  }, 6.25);  document.querySelector("#ToggleText").classList.remove("fade");  }  }  function makeNewBody(new_name=undefined, reset=false) {  title.title="Click to change body";  titleExtra.title="Click to reset body";  if (new_name==undefined) {  new_name=prompt("Enter new body name");  }  if (new_name==undefined || new_name=="") {  return;  }  if (new_name != selectedCharacter) {  titleExtra.textContent="(" + new_name + ") ";  newURL.searchParams.set("body_name", new_name);  body_name=new_name;  } else {  titleExtra.textContent="";  if (reset) {  newURL.searchParams.delete("body_name");  }  body_name=selectedCharacter;  }  replaceUrl=new URL(window.location.href);  if (!newURL.searchParams.has("body_name")) {  static_url_addons=static_url_addons.replace("body_name=" + body_name, "");  replaceUrl.searchParams.delete("body_name");  } else {  if (static_url_addons.includes("body_name")) {  static_url_addons=static_url_addons.replace(  "body_name=" + body_name,  "body_name=" + new_name  );  } else {  static_url_addons=static_url_addons + "body_name=" + new_name;  }  replaceUrl.searchParams.set("body_name", new_name);  }  window.history.replaceState(scenario, scenario, replaceUrl.toString());  }  function changeToFaceNumberingDefault(element) {  name=String(element.name);  body=name.rsplit("_", 1)[0];  pose=name.rsplit("_", 1)[1];  name_element=element.querySelector(".characterposename");  name_element.textContent=String(jsonData[body].poses[pose].faces.length) + " Faces";  }  function changeToPoseDefault(element) {  name=String(element.name);  pose=name.rsplit("_", 1)[1];  name_element=element.querySelector(".characterposename");  name_element.textContent=String(pose);  }  function changeToFaceNumberingOutfit(element) {  name=String(element.name);  body=name.rsplit("_", 1)[0];  pose=name.rsplit("_", 1)[1];  name_element=element.querySelector(".characterNameSpan");  name_element.textContent=String(jsonData[body].poses[pose].faces.length) + " Faces";  }  function changeToPoseOutfit(element) {  name=String(element.name);  name_element=element.querySelector(".characterNameSpan");  name_element.textContent=name;  }  function manipImageList() {  elDiv=document.querySelector("#hideDiv");  if (elDiv.classList.contains("hidden")) {  elDiv.classList.add("unhidden");  elDiv.classList.remove("hidden");  document.querySelector("#changeArrow").classList.remove("rotateDown");  document.querySelector("#changeArrow").classList.remove("rotateDownNoAnimation");  document.querySelector("#changeArrow").classList.add("rotateUp");  sessionStorage.setItem("areOutfitsHidden", "false");  elDiv.style.maxHeight=elDiv.getAttribute("currentHeight");  calculateImageListMaxHeight(false); /*We have to redo it for some reason for everything to work*/  } else {  elDiv.style.maxHeight=elDiv.getAttribute("currentHeight");  elDiv.classList.add("hidden");  elDiv.classList.remove("unhidden");  elDiv.classList.remove("unhiddennoanimation");  elDiv.style.maxHeight="";  document.querySelector("#changeArrow").classList.add("rotateDown");  document.querySelector("#changeArrow").classList.remove("rotateUp");  sessionStorage.setItem("areOutfitsHidden", "true");  }  }  function calculateImageListMaxHeight(assignClasses=true) {  elDiv=document.querySelector("#hideDiv");  elDiv.setAttribute("currentHeight", elDiv.scrollHeight + "px");  if (elDiv.classList.contains("unhidden") || elDiv.classList.contains("unhiddennoanimation")) {  if (assignClasses===true) {  document.querySelector("#hideDiv").classList.remove("unhidden");  document.querySelector("#hideDiv").classList.add("unhiddennoanimation");  }  elDiv.style.maxHeight=elDiv.scrollHeight + "px";  }  }  function switchCharactersAdd() {  if (selectedCharacter != undefined) {  newIndex=characterArray.findIndex((element) =>  element.toString().includes([selectedCharacter, selectedPose].toString())  );  do {  newIndex=newIndex==indexLen ? 0 : newIndex + 1;  } while (pose_filter > 1 && characterArray[newIndex][2] < pose_filter);  makeCharURL(characterArray[newIndex], newURL);  window.location.href=newURL.toString();  } else {  char_index=0;  while (pose_filter > 1 && characterArray[char_index][2] < pose_filter) {  char_index++;  }  makeCharURL(characterArray[char_index], newURL);  window.location.href=newURL.toString();  }  }  function switchCharactersMinus() {  if (selectedCharacter != undefined) {  newIndex=characterArray.findIndex((element) =>  element.toString().includes([selectedCharacter, selectedPose].toString())  );  do {  newIndex=newIndex==0 ? indexLen : newIndex - 1;  } while (pose_filter > 1 && characterArray[newIndex][2] < pose_filter);  makeCharURL(characterArray[newIndex], newURL);  window.location.href=newURL.toString();  } else {  char_index=indexLen;  while (pose_filter > 1 && characterArray[char_index][2] < pose_filter) {  char_index--;  }  makeCharURL(characterArray[char_index], newURL);  window.location.href=newURL.toString();  }  }  function getTitleForAddCharacter() {  newIndex=characterArray.findIndex((element) =>  element.toString().includes([selectedCharacter, selectedPose].toString())  );  do {  newIndex=newIndex==indexLen ? 0 : newIndex + 1;  } while (pose_filter > 1 && characterArray[newIndex][2] < pose_filter);  return characterArray[newIndex][0] + "_" + characterArray[newIndex][1];  }  function getTitleForMinusCharacter() {  newIndex=characterArray.findIndex((element) =>  element.toString().includes([selectedCharacter, selectedPose].toString())  );  do {  newIndex=newIndex==0 ? indexLen : newIndex - 1;  } while (pose_filter > 1 && characterArray[newIndex][2] < pose_filter);  return characterArray[newIndex][0] + "_" + characterArray[newIndex][1];  }  function properAccessoryName(accessory_object) {  return accessory_object.state != ""  ? accessory_object.name + "_" + accessory_object.state  : accessory_object.name;  }  function changeAccessoryOutfit(name_span) {  var i;  for (i of document.querySelectorAll(".outfitLine")) {  i.style.color="";  }  new_outfit=name_span.name;  for (i of character.poses[selectedPose].outfits) {  if (i.path==new_outfit) {  name_span.style.color="red";  setupAccessoryView(new_outfit, true);  }  }  }  function manipulateAccessories(accessory_name_span, remove=false) {  var i;  for (i of document.querySelectorAll(".accessoryLine")) {  if (references_to_accessories_on.includes(i.textContent)) {  i.style.color="red";  } else {  i.style.color="";  }  }  accessory_name=accessory_name_span.name;  outfit=document.querySelector("#AccessoryBuilderOutfit").name;  if (remove) {  references_to_accessories_on=references_to_accessories_on.filter(  (item) => item !== accessory_name  );  } else {  indexOfOutfit=getIndexOfOutfit(outfit, character.poses[selectedPose].outfits);  for (i of character.poses[selectedPose].outfits[indexOfOutfit].on_accessories) {  if (i.path==new_outfit) {  name_span.style.color="red";  setupAccessoryView(new_outfit, true);  }  }  }  setupAccessoryView(outfit, true);  }  function setupAccessoryView(outfit=undefined, clearBefore=false) {  var i;  if (outfit==undefined) {  outfit=character.poses[selectedPose].default_outfit;  }  if (clearBefore) {  document.querySelector("#topLevelAccess").remove();  }  indexOfOutfit=getIndexOfOutfit(outfit, character.poses[selectedPose].outfits);  out_start=character.poses[selectedPose].outfit_path;  accessChar=document.createElement("div");  accessChar.id="topLevelAccess";  accessChar.classList.add("characterAccess");  accessChar.title= "If there are any accessories or faces do not look like they line up, please disregard as this is just the best a web browser can do. ";  for (i of getLayeringOrderNotDefault(out_start, outfit, character.poses[selectedPose])) {  img=document.createElement("img");  if (i instanceof Object) {  if (names_of_accessories_on.includes(i.name)) {  continue;  }  image_path=i.path;  img.style.height=i.access_height + "px";  img.classList.add("characterImagesAcessory");  } else {  image_path=i;  img.classList.add("characterImagesOutfitAccessoryViews");  img.id="AccessoryBuilderOutfit";  img.name=outfit;  }  img.src=makeUrlCompatible(image_path);  img.alt=image_path.split("/").pop().split(".")[0];  accessChar.appendChild(img);  }  if (references_to_accessories_on.length > 0) {  for (i of character.poses[selectedPose].outfits[indexOfOutfit].on_accessories) {  if (references_to_accessories_on.includes(properAccessoryName(i))) {  img=document.createElement("img");  img.style.height=i.access_height + "px";  img.classList.add("characterImagesAcessory");  img.src=makeUrlCompatible(out_start + i.path);  img.alt=i.path.rsplit("/")[0].rsplit(".")[0];  accessChar.appendChild(img);  }  }  }  document.querySelector("#accessoryBuilder").append(accessChar);  }  String.prototype.rsplit=function (sep, maxsplit=0) {  var split=this.split(sep);  return maxsplit ? [split.slice(0, -maxsplit).join(sep)].concat(split.slice(-maxsplit)) : split;  };  var disable_keys=parseTextBool(sessionStorage.getItem("disable_keys"));  if (disable_keys==false) {  sessionStorage.setItem("disable_keys", false);  disable_keys=false;  }  document.querySelector("#ToggleText").textContent=disable_keys  ? "Keyboard shortcuts are disabled."  : "Keyboard shortcuts are enabled.";  scenario="Class Swap";var characterArray=[['amaria', 'a', 2], ['amaria', 'b', 2], ['brenda', 'a', 2], ['brenda', 'b', 2], ['cornelia', 'a', 2], ['cornelia', 'b', 2], ['erica', 'a', 3], ['erica', 'b', 3], ['erica', 'c', 3], ['iroha', 'a', 2], ['iroha', 'b', 2], ['izuna', 'a', 5], ['izuna', 'aears', 5], ['izuna', 'b', 5], ['izuna', 'bears', 5], ['izuna', 'sword', 5], ['marin', 'a', 3], ['marin', 'b', 3], ['marin', 'c', 3], ['phila', 'a', 2], ['phila', 'b', 2], ['sadie', 'a', 1], ['tori', 'a', 2], ['tori', 'b', 2], ['watson', 'a', 2], ['watson', 'b', 2]]; var jsonData={ "amaria": {"name": "amaria", "poses" :{"a" : {"max_face_height": 205, "face_path": "characters/amaria/a/faces/face/", "faces": ['0.png', '1.png'], "outfit_path": "characters/amaria/a/outfits/", "default_outfit" : "uniform/uniform.png", "default_accessories" : [ {"path" : "uniform/hair+1/off.png","layer" :  "+1","main_height" :  111},   ], "default_left_crop" : 170, "default_right_crop" : 446,"default_top_crop" : 28,"accessory_names" : ['{"name" : "bracelets", "state" : ""}, ', '{"name" : "facepaint", "state" : ""}, ', '{"name" : "hair", "state" : "ponytail"}, ', '{"name" : "hairband", "state" : ""}, '], "outfits": [{"path" : "casual/casual.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "casual/hair-1/off.png", "layer" : "-1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 160, "access_height" : 320},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "casual/casual2.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "casual/hair-1/off.png", "layer" : "-1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 160, "access_height" : 320},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "gym/gym.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "gym/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 160, "access_height" : 320},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "nude/nude.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "nude/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 160, "access_height" : 320},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "uniform/uniform.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "uniform/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 160, "access_height" : 320},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]}]}, "b" : {"max_face_height": 205, "face_path": "characters/amaria/b/faces/face/", "faces": ['0.png', '1.png'], "outfit_path": "characters/amaria/b/outfits/", "default_outfit" : "uniform/uniform.png", "default_accessories" : [ {"path" : "uniform/hair+1/off.png","layer" :  "+1","main_height" :  111},   ], "default_left_crop" : 255, "default_right_crop" : 446,"default_top_crop" : 28,"accessory_names" : ['{"name" : "bracelets", "state" : ""}, ', '{"name" : "facepaint", "state" : ""}, ', '{"name" : "hair", "state" : "bun"}, ', '{"name" : "hair", "state" : "doublebun"}, ', '{"name" : "hair", "state" : "ponytail"}, ', '{"name" : "hairband", "state" : ""}, '], "outfits": [{"path" : "casual/casual.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "casual/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 162, "access_height" : 323},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "bun", "path" : "acc_hair-1/on_bun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "doublebun", "path" : "acc_hair-1/on_doublebun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "casual_book/casual_book.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "casual_book/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "casual_book/bracelets/on.png", "layer" : "0", "main_height" : 162, "access_height" : 323},{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 162, "access_height" : 323},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "bun", "path" : "acc_hair-1/on_bun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "doublebun", "path" : "acc_hair-1/on_doublebun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "gym/gym.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "gym/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 162, "access_height" : 323},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "bun", "path" : "acc_hair-1/on_bun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "doublebun", "path" : "acc_hair-1/on_doublebun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "nude/nude.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "nude/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 162, "access_height" : 323},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "bun", "path" : "acc_hair-1/on_bun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "doublebun", "path" : "acc_hair-1/on_doublebun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "uniform/uniform.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "uniform/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 162, "access_height" : 323},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "bun", "path" : "acc_hair-1/on_bun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "doublebun", "path" : "acc_hair-1/on_doublebun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]}]}, }},"brenda": {"name": "brenda", "poses" :{"a" : {"max_face_height": 261, "face_path": "characters/brenda/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/brenda/a/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 166, "default_right_crop" : 389,"default_top_crop" : 54,"accessory_names" : [], "outfits": [{"path" : "dress.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gothloli.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "suit.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 270, "face_path": "characters/brenda/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp'], "outfit_path": "characters/brenda/b/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 183, "default_right_crop" : 439,"default_top_crop" : 62,"accessory_names" : [], "outfits": [{"path" : "dress.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gothloli.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "suit.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"cornelia": {"name": "cornelia", "poses" :{"a" : {"max_face_height": 201, "face_path": "characters/cornelia/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp', '8.webp', '9.webp', '10.webp', '11.webp', '12.webp', '13.webp', '14.webp', '15.webp', '16.webp', '17.webp', '18.webp', '19.webp', '20.webp', '21.webp', '22.webp'], "outfit_path": "characters/cornelia/a/outfits/", "default_outfit" : "gym2.webp", "default_accessories" : [   ], "default_left_crop" : 70, "default_right_crop" : 363,"default_top_crop" : 6,"accessory_names" : [], "outfits": [{"path" : "gym.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gym2.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 217, "face_path": "characters/cornelia/b/faces/mutations/", "faces": ['twintails/face/0.webp', 'twintails/face/1.webp', 'twintails/face/2.webp', 'twintails/face/3.webp', 'twintails/face/4.webp', 'twintails/face/5.webp', 'twintails/face/6.webp', 'twintails/face/7.webp', 'twintails/face/8.webp', 'twintails/face/9.webp', 'twintails/face/10.webp', 'twintails/face/11.webp', 'twintails/face/12.webp', 'twintails/face/13.webp', 'twintails/face/14.webp', 'twintails/face/15.webp', 'twintails/face/16.webp', 'twintails/face/17.webp', 'twintails/face/18.webp', 'twintails/face/19.webp', 'twintails/face/20.webp', 'twintails/face/21.webp', 'twintails/face/22.webp', 'twintails/face/23.webp', 'twintails/face/24.webp', 'twintails/face/25.webp', 'twintails/face/26.webp', 'twintails/face/27.webp', 'twintails/face/28.webp', 'twintails/face/29.webp', 'twintails/face/30.webp', 'twintails/face/31.webp', 'twintails/face/32.webp', 'twintails/face/33.webp', 'twintails/face/34.webp'], "outfit_path": "characters/cornelia/b/outfits/", "default_outfit" : "uniform/uniform.webp", "default_accessories" : [ {"path" : "uniform/ponytail/off.webp","layer" :  "0","main_height" :  200},   ], "default_left_crop" : 14, "default_right_crop" : 425,"default_top_crop" : 14,"accessory_names" : ['{"name" : "ponytail", "state" : ""}, '], "outfits": [{"path" : "uniform/uniform.webp", "off_accessories" : [{"name" : "ponytail", "state" : "", "path" : "uniform/ponytail/off.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}], "on_accessories" : [{"name" : "ponytail", "state" : "", "path" : "uniform/ponytail/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]}]}, }},"erica": {"name": "erica", "poses" :{"a" : {"max_face_height": 251, "face_path": "characters/erica/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/erica/a/outfits/", "default_outfit" : "uniform/uniform.webp", "default_accessories" : [   ], "default_left_crop" : 100, "default_right_crop" : 329,"default_top_crop" : 0,"accessory_names" : ['{"name" : "command_spell", "state" : ""}, ', '{"name" : "command_spell1", "state" : ""}, ', '{"name" : "command_spell2", "state" : ""}, '], "outfits": [{"path" : "casual/casual.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "casual/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "casual/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "casual/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "gown/gown.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "gown/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "gown/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "gown/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "kimono/kimono.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "kimono/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "kimono/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "kimono/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "traditional/traditional.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "traditional/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "traditional/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "traditional/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "uniform/uniform.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "uniform/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "uniform/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "uniform/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "uniform_b/uniform_b.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "uniform_b/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "uniform_b/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "uniform_b/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "uniform_c/uniform_c.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "uniform_c/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "uniform_c/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "uniform_c/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]}]}, "b" : {"max_face_height": 243, "face_path": "characters/erica/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/erica/b/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 71, "default_right_crop" : 326,"default_top_crop" : 0,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gown.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "kimono.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "traditional.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform_b.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform_c.webp", "off_accessories" : [], "on_accessories" : []}]}, "c" : {"max_face_height": 240, "face_path": "characters/erica/c/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/erica/c/outfits/", "default_outfit" : "casual.webp", "default_accessories" : [   ], "default_left_crop" : 140, "default_right_crop" : 431,"default_top_crop" : 6,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gown.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "kimono.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "traditional.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform_c.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"iroha": {"name": "iroha", "poses" :{"a" : {"max_face_height": 211, "face_path": "characters/iroha/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/iroha/a/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 105, "default_right_crop" : 327,"default_top_crop" : 31,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "maid.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform_b.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 215, "face_path": "characters/iroha/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/iroha/b/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 182, "default_right_crop" : 407,"default_top_crop" : 28,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "maid.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform_b.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"izuna": {"name": "izuna", "poses" :{"a" : {"max_face_height": 220, "face_path": "characters/izuna/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp', '8.webp'], "outfit_path": "characters/izuna/a/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 222, "default_right_crop" : 482,"default_top_crop" : 26,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "casualb.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "casualbb.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gym.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniforms.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniformsnoband.webp", "off_accessories" : [], "on_accessories" : []}]}, "aears" : {"max_face_height": 220, "face_path": "characters/izuna/aears/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp', '8.webp'], "outfit_path": "characters/izuna/aears/outfits/", "default_outfit" : "casualb.webp", "default_accessories" : [   ], "default_left_crop" : 210, "default_right_crop" : 483,"default_top_crop" : 15,"accessory_names" : [], "outfits": [{"path" : "casualb.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "casualbb.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 210, "face_path": "characters/izuna/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp'], "outfit_path": "characters/izuna/b/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 204, "default_right_crop" : 461,"default_top_crop" : 14,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "casualb.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, "bears" : {"max_face_height": 210, "face_path": "characters/izuna/bears/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp'], "outfit_path": "characters/izuna/bears/outfits/", "default_outfit" : "casualb.webp", "default_accessories" : [   ], "default_left_crop" : 204, "default_right_crop" : 461,"default_top_crop" : 14,"accessory_names" : [], "outfits": [{"path" : "casualb.webp", "off_accessories" : [], "on_accessories" : []}]}, "sword" : {"max_face_height": 220, "face_path": "characters/izuna/sword/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp'], "outfit_path": "characters/izuna/sword/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 210, "default_right_crop" : 483,"default_top_crop" : 15,"accessory_names" : [], "outfits": [{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"marin": {"name": "marin", "poses" :{"a" : {"max_face_height": 456, "face_path": "characters/marin/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp'], "outfit_path": "characters/marin/a/outfits/", "default_outfit" : "casual.webp", "default_accessories" : [   ], "default_left_crop" : 162, "default_right_crop" : 543,"default_top_crop" : 126,"accessory_names" : [], "outfits": [{"path" : "bathrobe.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "fashion.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "magical.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "pj.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "swimsuit2.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 456, "face_path": "characters/marin/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp'], "outfit_path": "characters/marin/b/outfits/", "default_outfit" : "casual.webp", "default_accessories" : [   ], "default_left_crop" : 162, "default_right_crop" : 543,"default_top_crop" : 126,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "fashion.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "magical.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "pj.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "swimsuit2.webp", "off_accessories" : [], "on_accessories" : []}]}, "c" : {"max_face_height": 456, "face_path": "characters/marin/c/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp'], "outfit_path": "characters/marin/c/outfits/", "default_outfit" : "casual.webp", "default_accessories" : [   ], "default_left_crop" : 162, "default_right_crop" : 543,"default_top_crop" : 126,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "fashion.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "magical.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "pj.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "swimsuit2.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"phila": {"name": "phila", "poses" :{"a" : {"max_face_height": 171, "face_path": "characters/phila/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp', '8.webp', '9.webp'], "outfit_path": "characters/phila/a/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 26, "default_right_crop" : 292,"default_top_crop" : 0,"accessory_names" : [], "outfits": [{"path" : "dress.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "swimsuit.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 171, "face_path": "characters/phila/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp', '8.webp'], "outfit_path": "characters/phila/b/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 91, "default_right_crop" : 306,"default_top_crop" : 5,"accessory_names" : [], "outfits": [{"path" : "dress.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gym.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"sadie": {"name": "sadie", "poses" :{"a" : {"max_face_height": 269, "face_path": "characters/sadie/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/sadie/a/outfits/", "default_outfit" : "uniform/uniform.webp", "default_accessories" : [ {"path" : "uniform/hairdown/off.webp","layer" :  "0","main_height" :  200},   ], "default_left_crop" : 66, "default_right_crop" : 428,"default_top_crop" : 21,"accessory_names" : ['{"name" : "hairdown", "state" : ""}, '], "outfits": [{"path" : "casual/casual.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual/hairdown/off.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual/hairdown/on.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}]},{"path" : "casual_b/casual_b.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual_b/hairdown/off.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual_b/hairdown/on.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}]},{"path" : "casual_madie/casual.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual_madie/hairdown/off.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual_madie/hairdown/on.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}]},{"path" : "casual_madie_b/casual_b.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual_madie_b/hairdown/off.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual_madie_b/hairdown/on.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}]},{"path" : "cheer.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "cheer_inverted.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "cheer_madie.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "cheer_madie_inverted.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "sleepwear/sleepwear.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "sleepwear/hairdown/off.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "sleepwear/hairdown/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "sleepwear_madie/sleepwear.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "sleepwear_madie/hairdown/off.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "sleepwear_madie/hairdown/on.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}]},{"path" : "uniform/uniform.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "uniform/hairdown/off.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "uniform/hairdown/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "uniform_madie/uniform_madie.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "uniform_madie/hairdown/off.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "uniform_madie/hairdown/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]}]}, }},"tori": {"name": "tori", "poses" :{"a" : {"max_face_height": 236, "face_path": "characters/tori/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/tori/a/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 95, "default_right_crop" : 306,"default_top_crop" : 0,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "fancy.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gym.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 238, "face_path": "characters/tori/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/tori/b/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 95, "default_right_crop" : 417,"default_top_crop" : 17,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "formal.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "swimsuit.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"watson": {"name": "watson", "poses" :{"a" : {"max_face_height": 250, "face_path": "characters/watson/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp'], "outfit_path": "characters/watson/a/outfits/", "default_outfit" : "coat.webp", "default_accessories" : [   ], "default_left_crop" : 156, "default_right_crop" : 373,"default_top_crop" : 2,"accessory_names" : [], "outfits": [{"path" : "coat.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "coat_glasses.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 789, "face_path": "characters/watson/b/faces/face/", "faces": ['0.webp'], "outfit_path": "characters/watson/b/outfits/", "default_outfit" : "mask.webp", "default_accessories" : [   ], "default_left_crop" : 77, "default_right_crop" : 609,"default_top_crop" : 1,"accessory_names" : [], "outfits": [{"path" : "mask.webp", "off_accessories" : [], "on_accessories" : []}]}, }},}; /*Start*/ titleExtra.textContent="";  indexLen=characterArray.length - 1;  file_name=location.pathname.split("/").pop() || ".";  var max_poses=Math.max(...characterArray.map((o) => o[2]));  var static_url_addons="";  function* enumerate(it, start=0) {  let i=start;  for (const x of it) yield [i++, x];  }  const urlParams=new URLSearchParams(window.location.search);  var newURL=new URL(location.protocol + "//" + location.host + location.pathname);  var homeURL=new URL(location.protocol + "//" + location.host + location.pathname);  var pose_filter= urlParams.get("pcount") && /^\d+$/.test(urlParams.get("pcount"))  ? parseInt(urlParams.get("pcount"))  : 1;  if (pose_filter > max_poses) {  pose_filter=max_poses;  }  var outfit_filter=urlParams.get("outfitview") && /^[1]$/.test(urlParams.get("outfitview")) ? true : false;  if (outfit_filter) {  newURL.searchParams.set("outfitview", "1");  homeURL.searchParams.set("outfitview", "1");  document.getElementById("imageList").classList.replace("characterswrap", "charactersrow");  scenario += " Outfit View";  }  if (pose_filter > 1) {  newURL.searchParams.set("pcount", pose_filter);  homeURL.searchParams.set("pcount", pose_filter);  }  document.getElementById("PoseHelp").innerHTML += " Current filter: >=" + pose_filter;  document.getElementById("OutfitHelp").innerHTML += outfit_filter ? "On" : "Off";  var selectedCharacter=urlParams.get("character") ? urlParams.get("character") : undefined;  var selectedPose=urlParams.get("pose") ? urlParams.get("pose") : undefined;  var body_name=urlParams.get("body_name") ? urlParams.get("body_name") : undefined;  if (selectedCharacter==undefined || selectedPose==undefined) {  selectedCharacter=undefined;  selectedPose=undefined;  body_name=undefined;  } else if (  selectedCharacter != undefined &&  (!(selectedCharacter in jsonData) || !(selectedPose in jsonData[selectedCharacter].poses))  ) {  selectedCharacter=undefined;  selectedPose=undefined;  body_name=undefined;  } else {  newURL.searchParams.set("character", selectedCharacter);  newURL.searchParams.set("pose", selectedPose);  if (body_name != undefined) {  newURL.searchParams.set("body_name", body_name);  }  }  window.history.replaceState(scenario, scenario, newURL.toString());  var rect_height=32;  if (selectedCharacter==undefined) {  document.querySelector("#title").addEventListener("click", function () {  document.querySelector("body").dispatchEvent(new KeyboardEvent("keydown", { code: "Enter" }));  });  document.querySelector("#renameCharacterBR1").remove();  document.querySelector("#renameCharacterBR2").remove();  document.querySelector("#hideButton").remove();  document.querySelector("#backbutton").remove();  document.querySelector("#navigationButtons").remove();  title.textContent=scenario;  var url2=new URL(newURL.toString());  Object.entries(jsonData).forEach(([character, characterData]) => {  if (pose_filter > 1 && Object.keys(characterData.poses).length < pose_filter) {  return;  }  url2.searchParams.set("character", character);  charElement=document.createElement("div");  if (outfit_filter) {  Object.entries(characterData.poses).forEach(([pose, poseData]) => {  var outfits=poseData.outfits.map((outfit) => [  outfit.path,  outfit.path.split("/").pop(),  outfit.off_accessories,  ]);  url2.searchParams.set("pose", pose);  characterDiv=document.createElement("div");  characterDiv.classList.add("character");  span=document.createElement("span");  span.classList.add("characterNameSpan");  span.textContent=character + "_" + pose;  characterDiv.name=character + "_" + pose;  characterDiv.appendChild(span);  for (const outfit of outfits) {  charLink=document.createElement("a");  charLink.href=url2.toString();  characterDiv.appendChild(charLink);  outerDiv=document.createElement("div");  outerDiv.classList.add("outerDiv");  outerDiv.title=outfit[0];  charLink.appendChild(outerDiv);  var default_outfit=getLayeringOrderOutfits(  poseData.outfit_path,  outfit[0],  outfit[2]  );  for (var i of default_outfit) {  img=document.createElement("img");  var image_path;  if (Array.isArray(i)) {  image_path=i[0];  img.style.height=i[1] + "px";  img.classList.add("characterImagesAcessory");  } else {  image_path=i;  img.classList.add("characterImagesOutfitMainViews");  }  img.src=makeUrlCompatible(image_path);  img.alt=image_path.rsplit("/")[0].rsplit(".")[0];  outerDiv.appendChild(img);  }  nameDiv=document.createElement("div");  nameDiv.classList.add("characterposename");  nameDiv.textContent=outfit[1].rsplit(".")[0];  outerDiv.appendChild(nameDiv);  }  characterDiv.addEventListener("mouseenter", function (evt) {  changeToFaceNumberingOutfit(this);  });  characterDiv.addEventListener("mouseleave", function (evt) {  changeToPoseOutfit(this);  });  charElement.appendChild(characterDiv);  });  document.querySelector("#imageList").append(charElement);  } else {  characterDiv=document.createElement("div");  characterDiv.classList.add("character");  span=document.createElement("span");  span.textContent=character;  characterDiv.appendChild(span);  Object.entries(characterData.poses).forEach(([pose, poseData]) => {  url2.searchParams.set("pose", pose);  var default_outfit=getLayeringOrder(  poseData.outfit_path,  poseData.default_outfit,  poseData  );  charLink=document.createElement("a");  charLink.href=url2.toString();  characterDiv.appendChild(charLink);  outerDiv=document.createElement("div");  outerDiv.classList.add("outerDiv");  outerDiv.title=poseData.default_outfit;  charLink.appendChild(outerDiv);  for (var i of default_outfit) {  img=document.createElement("img");  var image_path;  if (Array.isArray(i)) {  image_path=i[0];  img.style.height=i[1] + "px";  img.classList.add("characterImagesAcessory");  } else {  image_path=i;  img.classList.add("characterImagesOutfitMainViews");  }  img.src=makeUrlCompatible(image_path);  img.alt=image_path.rsplit("/")[0].rsplit(".")[0];  outerDiv.appendChild(img);  }  nameDiv=document.createElement("div");  nameDiv.classList.add("characterposename");  nameDiv.textContent=pose;  outerDiv.name=character + "_" + pose;  outerDiv.addEventListener("mouseenter", function (evt) {  changeToFaceNumberingDefault(this);  });  outerDiv.addEventListener("mouseleave", function (evt) {  changeToPoseDefault(this);  });  outerDiv.appendChild(nameDiv);  });  charElement.appendChild(characterDiv);  document.querySelector("#imageList").appendChild(charElement);  }  });  } else {  leftButton.title="Switch to " + getTitleForMinusCharacter();  rightButton.title="Switch to " + getTitleForAddCharacter();  leftButton.addEventListener("click", function () {  switchCharactersMinus();  });  rightButton.addEventListener("click", function () {  switchCharactersAdd();  });  show_outfits=parseTextBool(sessionStorage.getItem("areOutfitsHidden"));  title.textContent=selectedCharacter + "_" + selectedPose;  document.querySelector("#renameCharacter1").textContent= "Clicking on the outfits or faces will copy the text to change to that outfit or the show statement for face to your clipboard";  document.querySelector("#renameCharacter2").textContent= "Clicking on the page title will allow you to enter a new character for the copied text";  new_name=sessionStorage.getItem("body_name");  var character=jsonData[selectedCharacter];  const out_start=character.poses[selectedPose].outfit_path;  title.addEventListener("click", function () {  makeNewBody();  });  titleExtra.addEventListener("click", function () {  makeNewBody(selectedCharacter, true);  });  makeNewBody(body_name ? body_name : selectedCharacter);  hideButton.addEventListener("click", function () {  manipImageList();  });  document.querySelector("#backbutton").href=homeURL.toString();  characterContainer=document.createElement("div");  characterContainer.classList.add("character2Container");  let outfits=Object.keys(character.poses[selectedPose].outfits);  Object.entries(character.poses[selectedPose].outfits).forEach(([index, outfit]) => {  var outfitName=outfit.path.split("/").pop().rsplit(".")[0];  var default_outfit=getLayeringOrderOutfits(out_start, outfit.path, outfit.off_accessories);  var char2=document.createElement("div");  char2.classList.add("character2");  char2.title=outfit.path;  char2.addEventListener("click", function () {  outputOutfitCopyString(outfitName);  });  for (var i of default_outfit) {  img=document.createElement("img");  var image_path;  if (Array.isArray(i)) {  image_path=i[0];  img.style.height=i[1] + "px";  img.classList.add("characterImagesAcessory");  } else {  image_path=i;  img.classList.add("characterImagesOutfitMainViews");  }  img.src=makeUrlCompatible(image_path);  img.alt=image_path.rsplit("/")[0].rsplit(".")[0];  char2.appendChild(img);  }  outName=document.createElement("span");  outName.textContent=outfitName;  char2.appendChild(outName);  characterContainer.appendChild(char2);  });  document.querySelector("#imageList").append(characterContainer);  var face_path=character.poses[selectedPose].face_path;  const image_padding=10;  var default_outfit=getLayeringOrderFlat(  out_start,  character.poses[selectedPose].default_outfit,  character.poses[selectedPose]  );  character.poses[selectedPose].faces=character.poses[selectedPose].faces.map(  (face) => face_path + face  );  namesDiv=document.createElement("div");  namesDiv.classList.add("characterAccess");  namesDiv.classList.add("accessoryElementSelection");  names_of_accessories_on=[];  references_to_accessories_on=[];  if (character.poses[selectedPose].accessory_names.length > 0) {  accessHeader=document.createElement("span");  accessHeader.classList.add("elementHeaderLineAccessories");  accessHeader.textContent="Accessories";  namesDiv.append(accessHeader);  for (var i of character.poses[selectedPose].accessory_names) {  access=document.createElement("span");  access.classList.add("elementTableLine");  access.classList.add("accessoryLine");  access.textContent=i;  namesDiv.append(access);  }  }  outfitHeader=document.createElement("span");  outfitHeader.classList.add("elementHeaderLineOutfit");  outfitHeader.textContent="Outfits";  namesDiv.append(outfitHeader);  for (var i of character.poses[selectedPose].outfits) {  outfitSpan=document.createElement("span");  outfitSpan.classList.add("elementTableLine");  outfitSpan.classList.add("outfitLine");  outfitSpan.textContent=i.path.split("/").pop().split(".")[0];  outfitSpan.name=i.path;  outfitSpan.addEventListener("click", function () {  changeAccessoryOutfit(this);  });  if (character.poses[selectedPose].default_outfit==i.path) {  outfitSpan.style.color="red";  }  namesDiv.append(outfitSpan);  }  document.querySelector("#accessoryBuilder").append(namesDiv);  setupAccessoryView();  const skip_num=default_outfit.length;  layerinOrder=default_outfit.concat(character.poses[selectedPose].faces);  var left_crop=character.poses[selectedPose].default_left_crop;  var right_crop=character.poses[selectedPose].default_right_crop;  var top_crop=character.poses[selectedPose].default_top_crop;  var nheight=parseInt(character.poses[selectedPose].max_face_height - top_crop + rect_height);  var nwidth=right_crop - left_crop;  loadImages(layerinOrder, function (images) {  for (const [index, element] of enumerate(layerinOrder)) {  if (index < skip_num) {  continue;  }  txt_str=selectedPose + "_" + element.split("/").pop().split(".")[0].replace("%23", "#");  newCanvas=document.createElement("canvas");  newCanvas.id=txt_str;  newCanvas.title=txt_str;  newCanvas.height=nheight + image_padding;  newCanvas.width=nwidth;  newCanvas.classList.add("faceCanvas");  newCanvas.addEventListener("click", function (evt) {  outputFaceCopyString(this.id);  });  context=newCanvas.getContext("2d");  document.querySelector("#imageList2").append(newCanvas);  if (index % 2==1) {  context.fillStyle="Black"; /*Color1 replace*/  } else {  context.fillStyle="#121212"; /*Color2 replace*/  }  context.fillRect(0, 0, nwidth, nheight + image_padding);  for (var i=0; i < skip_num; i++) {  context.drawImage(images[i], left_crop, top_crop, nwidth, nheight, 0, 0, nwidth, nheight);  }  context.drawImage(images[index], left_crop, top_crop, nwidth, nheight, 0, 0, nwidth, nheight);  context.font="24pt Calibri";  context.fillStyle="White"; /*rect color*/ context.fillRect(  0,  0 + nheight - rect_height,  nwidth,  rect_height + image_padding  );  context.fillStyle="Black"; /*text color*/ context.fillText(  txt_str,  (nwidth - getTextWidth(txt_str, context.font)) / 2 + 0,  0 + nheight - (rect_height - image_padding) / 2 / 2  );  }  });  document.title=scenario + " " + selectedCharacter + "_" + selectedPose;  hideDiv.setAttribute("currentHeight", hideDiv.scrollHeight + "px");  hideDiv.style.maxHeight=hideDiv.scrollHeight + "px";  if (show_outfits) {  hideDiv.style.maxHeight="0px";  hideDiv.classList.add("hidden");  hideDiv.classList.remove("unhidden");  document.querySelector("#changeArrow").classList.remove("rotateUp");  document.querySelector("#changeArrow").classList.add("rotateDownNoAnimation");  }  window.addEventListener("resize", (event) => {  calculateImageListMaxHeight();  });  window.addEventListener("load", (event) => {  calculateImageListMaxHeight();  });  }  document.querySelector("body").addEventListener("keydown", (event) => {  var char_index;  var replaceUrl;  if (event.key=="Backspace") {  history.back();  } else if (event.code=="Backslash") {  disable_keys=!disable_keys;  sessionStorage.setItem("disable_keys", disable_keys);  document.getAnimations().forEach((animation) => {  animation.cancel();  });  document.querySelector("#ToggleText").textContent=disable_keys  ? "Keyboard shortcuts are disabled."  : "Keyboard shortcuts are enabled.";  setTimeout(function () {  document.querySelector("#ToggleText").classList.add("fade");  }, 6.25);  document.querySelector("#ToggleText").classList.remove("fade");  } else if (event.code=="KeyB") {  makeNewBody();  } else if (event.code=="KeyR") {  makeNewBody(selectedCharacter, true);  } else if (event.code=="KeyH" && selectedCharacter != undefined) {  manipImageList();  } else if (event.code=="Enter" && selectedCharacter==undefined) {  old_outfit_filter=outfit_filter ? 1 : 0;  old_outfit_word=outfit_filter ? "On" : "Off";  outfit_filter=!outfit_filter;  new_outfit_filter=outfit_filter ? 1 : 0;  new_outfit_word=outfit_filter ? "On" : "Off";  newURL.searchParams.set("outfitview", new_outfit_filter);  if (title.textContent==scenario) {  window.location.href=newURL.toString();  } else {  replaceUrl=new URL(window.location.href);  if (static_url_addons.includes("outfitview")) {  static_url_addons=static_url_addons.replace(  "outfitview=" + old_outfit_filter,  "outfitview=" + new_outfit_filter  );  } else {  static_url_addons=static_url_addons + "&outfitview=" + new_outfit_filter;  }  o_help=document.getElementById("OutfitHelp");  o_help.textContent=o_help.textContent.replace(  "Current status: " + old_outfit_word,  "Current status: " + new_outfit_word  );  replaceUrl.searchParams.set("outfitview", new_outfit_filter);  window.history.replaceState(scenario, scenario, replaceUrl.toString());  }  } else if (disable_keys) {  } else if (event.key=="ArrowUp" && selectedCharacter != undefined) {  window.location.href=homeURL.toString();  } else if (event.key=="ArrowRight") {  switchCharactersAdd();  } else if (event.key=="ArrowLeft") {  switchCharactersMinus();  } else if (event.code=="Minus" && selectedCharacter==undefined) {  old_pose_filter=pose_filter;  pose_filter=pose_filter - 1 < 1 ? 1 : pose_filter - 1;  newURL.searchParams.set("pcount", pose_filter);  if (old_pose_filter==pose_filter) {  return;  } else if (title.textContent==scenario) {  window.location.href=newURL.toString();  } else {  replaceUrl=new URL(window.location.href);  if (static_url_addons.includes("pcount")) {  static_url_addons=static_url_addons.replace(  "pcount=" + old_pose_filter,  "pcount=" + pose_filter  );  } else {  static_url_addons=static_url_addons + "&pcount=" + pose_filter;  }  if (pose_filter != old_pose_filter) {  p_help=document.getElementById("PoseHelp");  p_help.textContent=p_help.textContent.replace(">=" + old_pose_filter, ">=" + pose_filter);  }  replaceUrl.searchParams.set("pcount", pose_filter);  window.history.replaceState(scenario, scenario, replaceUrl.toString());  }  } else if (event.code=="Equal" && selectedCharacter==undefined) {  old_pose_filter=pose_filter;  pose_filter=pose_filter + 1 > max_poses ? max_poses : pose_filter + 1;  newURL.searchParams.set("pcount", pose_filter);  if (old_pose_filter==pose_filter) {  return;  } else if (title.textContent==scenario) {  window.location.href=newURL.toString();  } else {  replaceUrl=new URL(window.location.href);  if (static_url_addons.includes("pcount")) {  static_url_addons=static_url_addons.replace(  "pcount=" + old_pose_filter,  "pcount=" + pose_filter  );  } else {  static_url_addons=static_url_addons + "&pcount=" + pose_filter;  }  if (pose_filter != old_pose_filter) {  p_help=document.getElementById("PoseHelp");  p_help.textContent=p_help.textContent.replace(">=" + old_pose_filter, ">=" + pose_filter);  }  replaceUrl.searchParams.set("pcount", pose_filter);  window.history.replaceState(scenario, scenario, replaceUrl.toString());  }  }  });  </script>  </body>  </html> 