 <!DOCTYPE html>  <html lang="en">  <head>  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" >  <title>Class Swap Viewer</title>  <style>  body {  text-align: center; /*background-color: #00000088;*/  }  .faceCanvas:hover {  opacity: 75%;  }  #imageList2{  padding-top: 10px;  }  .outerDiv{  position: relative;  text-align: center;  }  .characterswrap{  display: flex;  flex-wrap: wrap;  justify-content: center; /* here we just put the only child div to the center */  }  .charactersrow{  display: flex;  flex-direction: column;  justify-content: center; /* here we just put the only child div to the center */  align-items: center;  }  .character{  margin: 20px 10px 0 0;  padding: 0px 0px 14px 0px;  display: flex;  flex-wrap: wrap;  justify-content: center; /* here we just put the only child div to the center */  border-radius: 0.5px;  border-color: grey;  border-style: solid;  position: relative;  }  .character2:hover,  .charactersrow > .character:hover,  .characterAccess:not(.disallowHover):hover,  .mainPageHoverLink:hover {  background-color: #8d8d8d41;  }  .character2,  .characterAccess,  .characterAccessList{  margin: 10px 10px 0 0;  padding: 0px 0px;  display: flex;  flex-wrap: nowrap;  justify-content: center; /* here we just put the only child div to the center */  border-radius: 0.5px;  border-color: grey;  border-style: solid;  position: relative;  }  .accessoryElementSelection{  width: 200px;  justify-content: unset;  display: block;  overflow-y: auto;  }  .elementTableLine,  .elementHeaderLineAccessories,  .elementHeaderLineOutfit{  display: table;  font-size: 20px;  user-select: none;  padding-left: 3px;  }  .elementHeaderLineAccessories,  .elementHeaderLineOutfit{  font-size: 28px;  padding-top: 4px;  padding-bottom: 2px;  }  .characterAccess,  .characterAccessList{  margin: 10px 2px 0 0;  }  .character2Container{  display: flex;  flex-wrap: wrap;  justify-content: center; /* here we just put the only child div to the center */  }  .character span,  .character2 span {  position: absolute;  background-color: grey;  color: White;  width: 100%;  line-break: anywhere;  font-size: 14px;  }  #changeBox{  position: absolute;  }  .characterImagesOutfitAccessoryViews,  .characterImagesOutfitMainViews{  position: relative;  padding-top: 20px;  left: 0px;  }  .characterImagesOutfitMainViews{  height: 200px; /*Main Height replace*/  }  .characterImagesOutfitAccessoryViews{  height: 400px; /*Access Height replace*/  }  .characterImagesAcessory{  position: absolute;  padding-top: 20px;  left: 0px;  }  .characterposename{  position: absolute;  left: 50%;  transform: translate(-50%, -21%);  z-index: 31;  background-color: grey;  color: White;  width: 100%;  }  #ToggleText{  /*Stolen From W3*/  width: 250px;  position: fixed;  top: 10px;  right: 60px;  font-size: 24px;  opacity: 0;  }  #ToggleText.fade{  /*Stolen From W3*/  opacity: 0;  animation: fade 6.25s linear;  }  @keyframes fade {  0%,  100% {  opacity: 0;  }  0% {  z-index: 6;  }  90% {  z-index: 4;  }  20%,  68% {  opacity: 1;  }  }  .rotateUp,  .rotateDown{  transition: all 0.75s ease-out;  position: relative;  }  .rotateUp{  transform: rotateX(180deg);  }  .rotateDownNoAnimation{  position: relative;  }  .hidden{  max-height: 0px;  }  .hidden,  .unhidden{  transition: all 0.75s ease-out;  overflow-y: hidden;  }  .unhiddennoanimation{  overflow-y: hidden;  }  #favDialog{  background-color: #8d8d8d;  color: #000000;  text-align: center;  border-radius: 15px;  padding: 8px 8px;  overflow: hidden;  border: #fff;  border-width: 6px;  border-style: solid;  max-width: 80%;  top: -230px;  }  #favDialog::backdrop {  background-color: rgba(0, 0, 0, 0.8);  }  #HelpTitle{  font-size: 48px;  display: block;  color: #fff;  }  .HelpLine{  display: block;  font-size: 24px;  }  .characterPageHelp{  display: block;  font-size: 24px;  color: #fff;  }  .boldenText{  font-weight: bold;  }  #backbutton{  display: inline-block;  vertical-align: sub;  padding-right: 3px;  height: 25px;  width: auto;  padding-top: 10px;  }  #infoButton{  display: inline-block;  vertical-align: sub;  padding-right: 3px;  height: 25px;  width: auto;  padding-top: 10px;  }  #title{  display: inline-block;  }  #titleExtra{  display: inline-block;  }  #infoButton:hover,  .navigationButton:hover,  .outfitLine:not(.tableSelected):hover,  .accessoryLine:hover,  .hideDivSelectionButtonsAllowHover:not(.disallowHover):hover,  #titleExtra:hover,  #title:hover,  #hideButton:hover,  #backbutton:hover {  filter: invert(0.6);  }  #hideButton{  padding-top: 2px;  display: inline-block;  }  .navigationButton{  top: 0px;  position: fixed;  z-index: 5;  }  .navigationButton.leftButton{  left: 0px;  }  .navigationButton.rightButton{  right: 0px;  }  .hideDivSelectionButtons{  display: inline-block;  margin: 0px;  user-select: none;  }  .hideDivSelectionButtonsUnderline{  text-decoration: underline;  }  .alignMiddle,  .alignMiddleImg{  vertical-align: middle;  }  .alignMiddleImg{  padding-right: 3px;  }  </style>  </head>  <body>  <div id="navigationButtons">  <a class="navigationButton leftButton"  ><img  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAwCAYAAABNPhkJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAQESURBVGhD5ZpJbE1RGMffQ/S9xsZ7ooZqaNU8xbwQEqzEVmJpSBBDDDGEhaVEEFIrFmqWsGQjtCQ2EiGR2GFhCgslpr5XrfL733Naw73n9b32yb2Xf/LPd8/pbdLf/b4z3HOb+BvKZLOL8F3ciR/iZfZHoStpY9kE3FLCGTzC6zB6jZe/a2l5YJrhqZ+NZRGwiwmn8K+w0nC8xFyGq7IBW9jTeJTXEVGVBRjYhYRG7IJ9g5vNZbjqMzCwCwjKbI3X4ddHvIPxe980w1WfJi0LexaP8Tr8+oQ3AHvRNMNXrzMM7HyCZmMX7Ae8JUqwUq+AgZ1HEGyt1+HXF7wdWN0TKZVc0hb2HK73OvxqxRujCCuVlGFgZxM0Zl2wGrPbogorFZ1hYGcSlNlJXodfOawyPmGa0VRRwMDOIiizLtg83grsSdOMrnosaWBnEFSiLliN2V1xgJUKZhjYaQSVsWKQ2vBuYBtMM/pyAhcB+xXvBPa4acZDgSUN7GSCytgFqzG7L26wkg8YWI1VwWrsBqkd7wf2iGnGS7+VtIVVGWsJCtI3vBfYQ6YZP3VnGNhxBGXWBavt4p44w0pehjOZTH0imVRmtW106TI+gPWQ+qsjRnpNol7pIklm64gXcCFYSUuQ1OPaHTHp732PD3YmEkcFfInGSv3kH5cm2xX905WV57kY4HX929IwfK906wjmf9EHAcdmW9hHvcRXNIZTXBzGm9Tr0Hf8BLfggeqIkbQSPcUNzNR3zLKUzVYQBL1ZbYeu43X80nOWsfhAJ5NKVgd/t+LPnZbN9DG83usI1lW8hl9+a5rxU/cGIpfLdaTT6WaeSBVN125rPB7HzN7E/XoPjp1+2zEB0Q7MTS4LQU/Agm6OI7Rvi+hlOpVqItMjabremARdp4fD/TrLio0C98S5fL49RXknDfR00+vTRDzGQuv9OBYKBJbyudxXjVUuq7ELWgcFtbovLtBOYAmILujReKrX6ZegayoqK2/wkLpeMCKrgsAS0G1A61OnoKd4nX5NZX2rZpZXeeusK7LqEVhSuTKmbzKm9S1JGQ3SdCY6Qau8I5vpooAlyjVv1+mxNF1n1IIebicyvY5FTkUDS0DkbHnrOEhLU5C0lA21E1nkoEsCloBotRNZIWhtWqpS3EdlRAq6ZGDJQivTWosFHqSZTGRDbHl32L7Q1StgyULf4lKTmOvzqT6vDrblrSPe0NVrYAmIz7a8C0HPxYNUEdzfabrCU5+AJQut8tZnGZ2ABmkOvse9j00zPJXlyJX3Y/1r4VqsbAdJD1bQoatsZ8xAvyCswi5o7yA8bJUNWAJaB2Wr8Z//dXcbXzOX4ar7iKecymSzwwjKtmbpR7iRh/GMGLISiR/Sjkbmi9CXxAAAAABJRU5ErkJggg=="  alt="Left button"  id="leftButton"  ></a>  <a class="navigationButton rightButton">  <img  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAwCAYAAABNPhkJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAQGSURBVGhD5ZpJaxRBGIZn3B1R44y7uIAePSkibnFXEETxIIiIxh3iCoLgL/DgQUVxRYMe3BA8CB5cQBA1bih68+YuOh33aMCMz9tVCRlT05kkA6nWF16q6kslzJOv1u5J+KJ0JrMAP8H1+C6ebn9UUiVt2aECbhzFZTwkDBi9wSuDbPaaaZZGnWzZ0ZqNm8JKQ/EJ/hmzTLM08gW4kIbjqlJC+wJ8A78z1WYS9Emgy02zfepsyw5VbW3t256plObsXNw9DOarL55Bn4f0fWFCbZMXwBIgzwASzDzsgu6HZ7YX2htgCZCnNtMzcY8wmC9BK9P36PvKhFonr4AlQJ4A9J7qHNwtDOZL0OX0uU/f1yZUvLwDlgB5DJBgNLy7hsF8ZfB0m+lWQXsJLNlMf6A6A7vmtKCV6bv01TQoSt4CS4A8AiigqoNJoUxPtdBvTShaXgNLgDy0mdaW1SUM5msAnkaf6mKgvQeWLPRnqhrerkwLegp9btO30AEmVCyAJUDuAfSNqo6ZrkwPxJMttFZ5p2IDLAFSbTOtOe367INwQ6ad0LEClmyma6nqbO3KtKAn0ecWfTX38xQ7YAmQOwDVUdWcdjEMxhNd0LEElgC5DdBPqprTrluf7tPNMh1bYMlCf6c6BbuOoXqooEzfpG9WgcZHPNw3h1H8/dTBd/3G9XgXXqpAAVUncrkVQRA8T5ZlMp0ZD9sJ7sQ6mOsPxEkNn9d1/Gyqarw8SWYXUbmAXRv6v6azmuzz8f8AKy0WsDby/0VfBKzh3KanBzHU/nCVZh5Po9iCR+OcYjGSDiC6Jo7BUS8WDuIdTbcl1buwfEf9kldim6njc4+gehRrLSqkA3hHkM3+ig2cS8D2pziBF4YBt47gbcDqVObHu6W2yMIew4vDgFvHGbFbGQk/bDueR0tgdeFvGZZ1CVjdrBoVuwwDm6YQ7JIw4FZVor6+Mqipacxsg1y3DG8FbBnFIRwFeyqXy21xwUqxAQZW53wtQFGXhNN4U00QfDXN5orFkOaC04fMHKa6zEScOoM3shp/MU23vM9wOp3uzYfUPhoFew5XtgQreZ1hYPskkknBrjARp84zZzcwjD/ZdqS8BWbO9qIQ7Kow4NZF9tn1bD16O1GUvBzSwKYo9uIo2Et4Y2tgJe+A+xnYfXhtGHBLsOuYsx9Ns3h5NaTJrF6CK7MbwoBb+nrTamCbPXMuRt5kGFg9k9qDo2CvYGW2TbCSF8DA6hHTblwZBtwSrDIb+bKsJfmSYb3p32yqTl3Fa9oLK/kCPAEXurldx4It6oV3S/IFuND3NAS7CtiXptl+eXEf7plKKXvj8agwYKRv51UAW9IHjN5sSyxcIykq8Fj8AFeVYs7mK5H4A8xPTiQK7Q/0AAAAAElFTkSuQmCC"  alt="Right button"  id="rightButton"  ></a>  </div>  <span id="ToggleText" class="popup"></span>  <!--We need to add a function that talks about the images not lining up properly when scaled-->  <dialog id="favDialog" onclick="event.target==this && this.close()">  <span  ><span id="HelpTitle">Character Viewer Shortcuts</span> <br>  <span class="HelpLine"><span class="boldenText">Backspace:</span> Return to previous page. </span><br>  <span class="HelpLine"  ><span class="boldenText">BackSlash:</span> Disable and enable the shortcuts below.</span  ><br><span class="HelpLine"  ><span class="boldenText">UpArrow:</span> Return to the character selection page.</span  >  <br><span class="HelpLine"  ><span class="boldenText">Left/Right Arrow:</span> Navigate through characters in alphabetical  order.</span  ><br><span class="HelpLine" id="PoseHelp"  ><span class="boldenText">Equals/Minus:</span> Increase or decrease how many poses a character must  have to be shown. This affects both the main character page and the left/right navigation.</span  ><br><span class="HelpLine" id="OutfitHelp"  ><span class="boldenText">Enter:</span> Toggle outfit view. On the main character page, this will  show all outfits instead of one per pose. Current status: </span  ><br><br id="renameCharacterBR1" ><span  class="HelpLine characterPageHelp"  id="renameCharacter1"  ></span  ><br id="renameCharacterBR2" ><span class="HelpLine characterPageHelp" id="renameCharacter2"></span  ></span>  </dialog>  <a id="backbutton"  ><img  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAAAAAKVnuc8AAAACdFJOU/8A5bcwSgAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAG9JREFUOE/FzVEOwCAMAlC9/6U3U6xthejPMn4m5SVr/ZAfQNsO+CLtDZ5IrmMvIjXbNWB7BHQPgO8LiN2B2ieQOwD2PQBoJLfg+AsXVlLmTQo/KbEuQoQDF7FTkSoTpZ2ACbwtBQyBF1LBls9B7w90XAMfmMyTSQAAAABJRU5ErkJggg=="  title="Back to Main Page"  alt="Back button"  ></a>  <h1 id="titleExtra" href="#titleExtra">Text</h1>  <h1 id="title">Text</h1>  <div id="infoButton" onclick="popouthelp()">  <img  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAINSURBVFhHxZe7SgQxFIZH8VLYWNhY2AjiAyh4wcJCtLIRBF9AfAltBPUNxJfQXlAUtfRSC2IvCFoJ2uj/rfllZd2ZZNm4H/zJMJucc3ZykjlTdJqu0MfQJy1JC9KENCYNSvAqPUjX0ol0LH1IbQEn29Kz9BkpxjLHAbbMmvQk2fCttCnNS8NSbxDX3OM3xng8c7GRTI90INnQpTQnxcLYC8nzsYXNKBh4KDHxTVqXUnLFMGdDwga2sBkVhP/5izTDjSZsSWdBq9xoAjacP9guhfXyPy9zDnsSY1FZADAt+Uk0zQky1gnHY68iJQBgORiLjz93B9uGASRczJoPSCNBMWDzXMIHvn7BIeN1Ssn2VGYlfOALnz8sS/zAHs7NnYQvfBbdNILjFY5CH0NqDhi2IyzSOADOdrgKfU7sY5LGAfBigfvQ58Q+RmkcgLcFyZEb+6j5dAAdwwHwPoeh0OfEPmo+HQDFBIyHPif28UjjAKhkIOchZOzjhsYBnIZ+JfQ5sQ/Kth/6pdSjuJWDqOEo9hN4l/a/L4tdqZUCpAps7nxf1nw1FK0dfx1DfUFCEVFGSgBTUmVBYlySsU5lQcQGgHPnV2VJBrFFaVUAzGmpKAUG+kkgKhkyOBbGUqx6PraindfDejkx0b99mNRDxmb7NEvZ7/44pZKhmOB9bge8WDjbOV454dr6cZqRovgCfJ2xnbN9A/cAAAAASUVORK5CYII="  title="Shortcuts and Information"  alt="Info button"  >  </div>  <div id="selectionButtonDiv">  <h2  class="hideDivSelectionButtons hideDivSelectionButtonsUnderline"  id="outfitsSelect"  title="Show outfits"  >  Outfits  </h2>  <h2  class="hideDivSelectionButtons hideDivSelectionButtonsUnderline"  id="accessorySelect"  title="Show accessories"  >  Accessories  </h2>  </div>  <div id="hideDiv" class="unhidden">  <div id="imageList" class="characterswrap"></div>  <div class="character2Container hidden" id="accessoryBuilder"></div>  </div>  <div id="hideButton">  <img  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAUBAMAAADSJhiXAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURWBgYP///w85EMkAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAXSURBVCjPY8ADGAVxgFGpYSSFCzAwAABZWxzDrkDX/gAAAABJRU5ErkJggg=="  id="changeBox"  alt="Box for arrow"  >  <img  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAUCAYAAAAgCAWkAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAGhSURBVFhH7dY7KIVhHMfx41rkFhIGZHAZiBRKGWQwyEgGJZeiJCUiRgaLZMMmg41MCpsMisXAhEKJEiH3+P6U+vc66OBclF99hvOe8z7P/7zP+1xc//kj6cUMkl8/BWaCUYhZtOuCu6ThCs84RwdCEEhJwSgeoDr3kYh36YJ+YG2gBP5OFFpxCFvfJVrgNpXYgb3hCROIhz9SgVXYmjQyulaMTxOOAVzDNnCKJgTBF8nGNB5h69hFIzxKBhZgGxI9kXx4K3EYxAlsv2cYQSy+nRrswTasYdZEjMFvphZbsH3dYx55+JVEYhh3sB0doQ4/TREW4XyltADpYXolOViG7VCWkAVPo2V1HBew7ekhdSMaXk891KEt4BZDiMBX0SLShgPYNjTyk8iET6P5MgZ3q001Pko51uG8bwVl8GsKsAZbmGjSpuMtqdBRyTnvtLg0QPMyIKLzUjO0F9lCtVf1ow86ItnvbqBFJQkBmQRMQacGW7jTHHLhqw34RynFJpx/YhtVCMOfSig6oddLS28PvDovfDHMOrYrx9Do/OfruFwvjpSeW9iun1cAAAAASUVORK5CYII="  class="rotateUp"  id="changeArrow"  alt="Arrow for hiding"  >  </div>  <div id="imageList2"></div>  <script>  /* jshint esversion: 11, -W083*/ var new_name="";  function popouthelp() {  var dialog=document.getElementById("favDialog");  dialog.showModal();  }  function RGBAtoRGB(rgb_string, r2=255, g2=255, b2=255) {  if (rgb_string.startsWith("rgba")) {  var rgb=rgb_string.match(/[\.\d]+/g);  r=parseInt(rgb[0]);  g=parseInt(rgb[1]);  b=parseInt(rgb[2]);  a=parseFloat(rgb[3]);  } else {  return rgb_string;  }  var r3=Math.round((1 - a) * r2 + a * r);  var g3=Math.round((1 - a) * g2 + a * g);  var b3=Math.round((1 - a) * b2 + a * b);  return "rgb(" + r3 + "," + g3 + "," + b3 + ")";  }  function parseTextBool(textToParse) {  return textToParse=="true" ? true : false;  }  function makeUrlCompatible(url) {  return url.replace("#", "%23");  }  function getTextWidth(text, font) {  const canvas=getTextWidth.canvas || (getTextWidth.canvas=document.createElement("canvas"));  const context=canvas.getContext("2d");  context.font=font;  const metrics=context.measureText(text);  return metrics.width;  }  function compareDefaultAcc(a, b) {  a=parseInt(a.layer);  b=parseInt(b.layer);  if (a < b) {  return -1;  }  if (a > b) {  return 1;  }  return 0;  }  function getIndexOfOutfit(outfit, outfits) {  for (var i in outfits) {  if (outfits[i].path==outfit) {  return parseInt(i);  }  }  return -1;  }  function loadImages(sources, callback) {  var images={};  var loadedImages=0;  var numImages=0;  for (var _ in sources) {  numImages++;  }  for (var src in sources) {  images[src]=new Image();  images[src].onload=function () {  if (++loadedImages >= numImages) {  callback(images);  }  };  images[src].src=makeUrlCompatible(sources[src]);  }  }  function makeCharURL(namepose, urlToMend) {  var splitted=namepose.toString().split(",");  urlToMend.searchParams.set("character", splitted[0]);  urlToMend.searchParams.set("pose", splitted[1]);  }  function getLayeringOrderOutfits(out_start, outfit, outfits) {  var default_outfit=[].concat(out_start + outfit);  if (outfits.length > 0) {  var negativeOffset=0;  outfits.sort(compareDefaultAcc);  for (var src in outfits) {  outfits[src].path=out_start + outfits[src].path;  if (parseInt(outfits[src].layer) < 0) {  default_outfit.splice(  negativeOffset,  0,  [].concat(outfits[src].path, outfits[src].main_height)  );  negativeOffset++;  } else {  default_outfit.push([].concat(outfits[src].path, outfits[src].main_height));  }  }  }  return default_outfit;  }  function getLayeringOrderNotDefault(out_start, outfit, character_obj) {  var default_outfit=[].concat(out_start + outfit);  index_of_outfit=getIndexOfOutfit(outfit, character_obj.outfits);  if (character_obj.outfits[index_of_outfit].off_accessories.length > 0) {  var negativeOffset=0;  copy_of_accessories=[...character_obj.outfits[index_of_outfit].off_accessories];  copy_of_accessories.sort(compareDefaultAcc);  for (var src in copy_of_accessories) {  if (parseInt(copy_of_accessories[src].layer) < 0) {  default_outfit.splice(negativeOffset, 0, {  "path": copy_of_accessories[src].path,  "access_height": copy_of_accessories[src].access_height,  "name": copy_of_accessories[src].name,  "state": copy_of_accessories[src].state,  });  negativeOffset++;  } else {  default_outfit.push({  "path": copy_of_accessories[src].path,  "access_height": copy_of_accessories[src].access_height,  "name": copy_of_accessories[src].name,  "state": copy_of_accessories[src].state,  });  }  }  }  return default_outfit;  }  function getLayeringOrderWithAccessories(out_start, outfit, character_obj) {  var default_outfit=[].concat(out_start + outfit);  index_of_outfit=getIndexOfOutfit(outfit, character_obj.outfits);  var negativeOffset=0;  copy_of_accessories=[...character_obj.outfits[index_of_outfit].off_accessories];  for (var i of character_obj.outfits[index_of_outfit].on_accessories) {  if (references_to_accessories_on.includes(properAccessoryName(i))) {  copy_of_accessories.push(i);  }  }  copy_of_accessories.sort(compareDefaultAcc);  for (var src in copy_of_accessories) {  if (parseInt(copy_of_accessories[src].layer) < 0) {  default_outfit.splice(negativeOffset, 0, {  "path": copy_of_accessories[src].path,  "access_height": copy_of_accessories[src].access_height,  "name": copy_of_accessories[src].name,  "state": copy_of_accessories[src].state,  });  negativeOffset++;  } else {  default_outfit.push({  "path": copy_of_accessories[src].path,  "access_height": copy_of_accessories[src].access_height,  "name": copy_of_accessories[src].name,  "state": copy_of_accessories[src].state,  });  }  }  return default_outfit;  }  function getLayeringOrder(out_start, outfit, character_obj) {  var default_outfit=[].concat(out_start + outfit);  if (character_obj.default_accessories.length > 0) {  var negativeOffset=0;  character_obj.default_accessories.sort(compareDefaultAcc);  for (var src in character_obj.default_accessories) {  if (!character_obj.default_accessories[src].path.startsWith(out_start)) {  character_obj.default_accessories[src].path= out_start + character_obj.default_accessories[src].path;  }  if (parseInt(character_obj.default_accessories[src].layer) < 0) {  default_outfit.splice(  negativeOffset,  0,  [].concat(  character_obj.default_accessories[src].path,  character_obj.default_accessories[src].main_height  )  );  negativeOffset++;  } else {  default_outfit.push(  [].concat(  character_obj.default_accessories[src].path,  character_obj.default_accessories[src].main_height  )  );  }  }  }  return default_outfit;  }  function getLayeringOrderFlat(out_start, outfit, character_obj) {  var default_outfit=getLayeringOrder(out_start, outfit, character_obj);  for (var i=0; i < default_outfit.length; i++) {  if (Array.isArray(default_outfit[i])) {  default_outfit[i]=default_outfit[i][0];  }  }  return default_outfit;  }  function outputOutfitCopyString(outfit) {  if (selectedCharacter != null) {  navigator.clipboard.writeText("outfit " + body_name + " " + outfit);  document.getAnimations().forEach((animation) => {  animation.cancel();  });  document.querySelector("#ToggleText").textContent='Copied outfit "' + outfit + '" to clipboard';  setTimeout(function () {  document.querySelector("#ToggleText").classList.add("fade");  }, 6.25);  document.querySelector("#ToggleText").classList.remove("fade");  }  }  function outputFaceCopyString(face_name) {  if (selectedCharacter != null) {  navigator.clipboard.writeText("show " + body_name + " " + face_name);  document.getAnimations().forEach((animation) => {  animation.cancel();  });  document.querySelector("#ToggleText").textContent='Copied face "' + face_name + '" to clipboard';  setTimeout(function () {  document.querySelector("#ToggleText").classList.add("fade");  }, 6.25);  document.querySelector("#ToggleText").classList.remove("fade");  }  }  function outputAccessoryCopyString() {  if (references_to_accessories_on.length > 0) {  navigator.clipboard.writeText(  "accessory " + body_name + " set " + references_to_accessories_on.join(", ")  );  outputtext= 'Copied accessory string for "' +  references_to_accessories_on.join('" and "') +  '" to clipboard';  } else {  navigator.clipboard.writeText("accessory " + body_name + " clear ");  outputtext="Copied string to clear all accessories to clipboard";  }  document.getAnimations().forEach((animation) => {  animation.cancel();  });  document.querySelector("#ToggleText").textContent=outputtext;  setTimeout(function () {  document.querySelector("#ToggleText").classList.add("fade");  }, 6.25);  document.querySelector("#ToggleText").classList.remove("fade");  }  function makeNewBody(new_name=undefined, reset=false) {  title.title="Click to change body";  titleExtra.title="Click to reset body";  if (new_name==undefined) {  new_name=prompt("Enter new body name");  }  if (new_name==undefined || new_name=="") {  return;  }  if (new_name != selectedCharacter) {  titleExtra.textContent="(" + new_name + ") ";  newURL.searchParams.set("body_name", new_name);  body_name=new_name;  } else {  titleExtra.textContent="";  if (reset) {  newURL.searchParams.delete("body_name");  }  body_name=selectedCharacter;  }  replaceUrl=new URL(window.location.href);  if (!newURL.searchParams.has("body_name")) {  static_url_addons=static_url_addons.replace("body_name=" + body_name, "");  replaceUrl.searchParams.delete("body_name");  } else {  if (static_url_addons.includes("body_name")) {  static_url_addons=static_url_addons.replace(  "body_name=" + body_name,  "body_name=" + new_name  );  } else {  static_url_addons=static_url_addons + "body_name=" + new_name;  }  replaceUrl.searchParams.set("body_name", new_name);  }  window.history.replaceState(scenario, scenario, replaceUrl.toString());  }  function changeToFaceNumberingDefault(element) {  name=String(element.name);  body=name.rsplit("_", 1)[0];  pose=name.rsplit("_", 1)[1];  name_element=element.querySelector(".characterposename");  name_element.textContent=String(jsonData[body].poses[pose].faces.length) + " Faces";  }  function changeToPoseDefault(element) {  name=String(element.name);  pose=name.rsplit("_", 1)[1];  name_element=element.querySelector(".characterposename");  name_element.textContent=String(pose);  }  function changeToFaceNumberingOutfit(element) {  name=String(element.name);  body=name.rsplit("_", 1)[0];  pose=name.rsplit("_", 1)[1];  name_element=element.querySelector(".characterNameSpan");  name_element.textContent=String(jsonData[body].poses[pose].faces.length) + " Faces";  }  function changeToPoseOutfit(element) {  name=String(element.name);  name_element=element.querySelector(".characterNameSpan");  name_element.textContent=name;  }  function manipImageList() {  elDiv=document.querySelector("#hideDiv");  if (elDiv.classList.contains("hidden")) {  elDiv.classList.add("unhidden");  elDiv.classList.remove("hidden");  document.querySelector("#changeArrow").classList.remove("rotateDown");  document.querySelector("#changeArrow").classList.remove("rotateDownNoAnimation");  document.querySelector("#changeArrow").classList.add("rotateUp");  sessionStorage.setItem("areOutfitsHidden", "false");  elDiv.style.maxHeight=elDiv.getAttribute("currentHeight");  document.querySelector("#changeArrow").title="Hide accessories and Outfits";  outfitsSelect.classList.remove("disallowHover");  accessorySelect.classList.remove("disallowHover");  calculateImageListMaxHeight(false); /*We have to redo it for some reason for everything to work*/  } else {  elDiv.style.maxHeight=elDiv.getAttribute("currentHeight");  elDiv.classList.add("hidden");  elDiv.classList.remove("unhidden");  elDiv.classList.remove("unhiddennoanimation");  elDiv.style.maxHeight="";  document.querySelector("#changeArrow").title="Show accessories and Outfits";  document.querySelector("#changeArrow").classList.add("rotateDown");  document.querySelector("#changeArrow").classList.remove("rotateUp");  sessionStorage.setItem("areOutfitsHidden", "true");  outfitsSelect.classList.add("disallowHover");  accessorySelect.classList.add("disallowHover");  }  }  function calculateImageListMaxHeight(assignClasses=true) {  elDiv=document.querySelector("#hideDiv");  elDiv.setAttribute("currentHeight", elDiv.scrollHeight + "px");  if (elDiv.classList.contains("unhidden") || elDiv.classList.contains("unhiddennoanimation")) {  if (assignClasses===true) {  document.querySelector("#hideDiv").classList.remove("unhidden");  document.querySelector("#hideDiv").classList.add("unhiddennoanimation");  }  elDiv.style.maxHeight=elDiv.scrollHeight + "px";  }  }  function switchCharactersAdd() {  if (selectedCharacter != undefined) {  newIndex=characterArray.findIndex((element) =>  element.toString().includes([selectedCharacter, selectedPose].toString())  );  do {  newIndex=newIndex==indexLen ? 0 : newIndex + 1;  } while (pose_filter > 1 && characterArray[newIndex][2] < pose_filter);  makeCharURL(characterArray[newIndex], newURL);  window.location.href=newURL.toString();  } else {  char_index=0;  while (pose_filter > 1 && characterArray[char_index][2] < pose_filter) {  char_index++;  }  makeCharURL(characterArray[char_index], newURL);  window.location.href=newURL.toString();  }  }  function switchCharactersMinus() {  if (selectedCharacter != undefined) {  newIndex=characterArray.findIndex((element) =>  element.toString().includes([selectedCharacter, selectedPose].toString())  );  do {  newIndex=newIndex==0 ? indexLen : newIndex - 1;  } while (pose_filter > 1 && characterArray[newIndex][2] < pose_filter);  makeCharURL(characterArray[newIndex], newURL);  window.location.href=newURL.toString();  } else {  char_index=indexLen;  while (pose_filter > 1 && characterArray[char_index][2] < pose_filter) {  char_index--;  }  makeCharURL(characterArray[char_index], newURL);  window.location.href=newURL.toString();  }  }  function getTitleForAddCharacter() {  newIndex=characterArray.findIndex((element) =>  element.toString().includes([selectedCharacter, selectedPose].toString())  );  do {  newIndex=newIndex==indexLen ? 0 : newIndex + 1;  } while (pose_filter > 1 && characterArray[newIndex][2] < pose_filter);  return characterArray[newIndex][0] + "_" + characterArray[newIndex][1];  }  function getTitleForMinusCharacter() {  newIndex=characterArray.findIndex((element) =>  element.toString().includes([selectedCharacter, selectedPose].toString())  );  do {  newIndex=newIndex==0 ? indexLen : newIndex - 1;  } while (pose_filter > 1 && characterArray[newIndex][2] < pose_filter);  return characterArray[newIndex][0] + "_" + characterArray[newIndex][1];  }  function properAccessoryName(accessory_object) {  return accessory_object.state != ""  ? accessory_object.name + "_" + accessory_object.state  : accessory_object.name;  }  function properAccessoryNameParams(accessory_name, accessory_state) {  return accessory_state != "" ? accessory_name + "_" + accessory_state : accessory_name;  }  function changeAccessoryOutfit(name_span) {  var i;  outfitButton=name_span.querySelectorAll(".alignMiddleImg")[0];  if (outfitButton.classList.contains("check")) {  return;  }  for (i of document.querySelectorAll(".outfitLine")) {  select_square=i.querySelectorAll(".alignMiddleImg")[0];  select_square.src= "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDctMDNUMTM6NTI6NDItMDYwMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiCiAgIHBob3Rvc2hvcDpEYXRlQ3JlYXRlZD0iMjAyMy0wNy0wM1QxMzo1Mjo0Mi0wNjAwIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIyMCIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjIwIgogICBleGlmOkNvbG9yU3BhY2U9IjEiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMjAiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjIwIgogICB0aWZmOlJlc29sdXRpb25Vbml0PSIyIgogICB0aWZmOlhSZXNvbHV0aW9uPSI3Mi8xIgogICB0aWZmOllSZXNvbHV0aW9uPSI3Mi8xIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0icHJvZHVjZWQiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFmZmluaXR5IFBob3RvIDIgMi4xLjEiCiAgICAgIHN0RXZ0OndoZW49IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0iciI/PsqWhVcAAAGBaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRuUtDQRCHvyRKxIMIEbGwCKJWRmKUoI1FgheoRRLBq0leLiHH470ECbaCraAg2ngV+hdoK1gLgqIIYqu1oo2G57xEiIiZZXa+/e3OsDsL1nBayeh1Hshk81pwwu+aX1h02Z+xY8PJEO0RRVdnQuNhatrHHRYz3rjNWrXP/WtNsbiugKVBeFRRtbzwpPD0al41eVu4TUlFYsKnwn2aXFD41tSjFX4xOVnhL5O1cDAA1lZhV/IXR3+xktIywvJyujPpgvJzH/MlzfHsXEhil3gnOkEm8ONiijEC+BhgRGYfbrz0y4oa+Z5y/iw5yVVkVimisUKSFHn6RC1I9bjEhOhxGWmKZv//9lVPDHor1Zv9UP9kGG89YN+C0qZhfB4aRukIbI9wka3m5w5g+F30zarWvQ+OdTi7rGrRHTjfgI4HNaJFypJN3JpIwOsJtCyA8xoalyo9+9nn+B7Ca/JVV7C7B71y3rH8DXjLZ+43iMieAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7ElEQVQ4je3VP0oDQRTH8U/GbOclFgzG0pTxMh5DLC1i4SX0MFoImlaJkDto6bKxeLO4CZJN1lJ/MMzA8H7z3vz5zsC6SpzhCMl21XjDPZabkwWuUWG1Z6tybAHDbHiFC3zgFnN8dmRY4BTnOXaFy6bMCu847jD5SeOcSIUyiT07yJm99jB8wV32mCZxAESZffWU+1HyfZpde7ZNTWzquhp769/wrxjWeVz8wqeJrZNAEPHQ+2qS+wXrcBj3MDvRgsNQwPFGIOhRPPRnu+FrIvB1KJi4bE/O9AfsLHsYbKxaYoqR3b6ABR7amX0BUYVIcK45KfQAAAAASUVORK5CYII=";  select_square.classList.replace("check", "nocheck");  i.classList.remove("tableSelected");  i.title="Show outfit " + i.textContent;  }  new_outfit=name_span.name;  for (i of character.poses[selectedPose].outfits) {  if (i.path==new_outfit) {  select_square=name_span.querySelectorAll(".alignMiddleImg")[0];  select_square.src= "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDctMDNUMTM6NTI6NDItMDYwMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDctMDNUMTQ6MTE6NDAtMDY6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDctMDNUMTQ6MTE6NDAtMDY6MDAiCiAgIHBob3Rvc2hvcDpEYXRlQ3JlYXRlZD0iMjAyMy0wNy0wM1QxMzo1Mjo0Mi0wNjAwIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIyMCIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjIwIgogICBleGlmOkNvbG9yU3BhY2U9IjEiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMjAiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjIwIgogICB0aWZmOlJlc29sdXRpb25Vbml0PSIyIgogICB0aWZmOlhSZXNvbHV0aW9uPSI3Mi8xIgogICB0aWZmOllSZXNvbHV0aW9uPSI3Mi8xIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0icHJvZHVjZWQiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFmZmluaXR5IFBob3RvIDIgMi4xLjEiCiAgICAgIHN0RXZ0OndoZW49IjIwMjMtMDctMDNUMTQ6MTE6NDAtMDY6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0iciI/PohIZ3IAAAGBaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRuUtDQRCHvyRKxIMIEbGwCKJWRmKUoI1FgheoRRLBq0leLiHH470ECbaCraAg2ngV+hdoK1gLgqIIYqu1oo2G57xEiIiZZXa+/e3OsDsL1nBayeh1Hshk81pwwu+aX1h02Z+xY8PJEO0RRVdnQuNhatrHHRYz3rjNWrXP/WtNsbiugKVBeFRRtbzwpPD0al41eVu4TUlFYsKnwn2aXFD41tSjFX4xOVnhL5O1cDAA1lZhV/IXR3+xktIywvJyujPpgvJzH/MlzfHsXEhil3gnOkEm8ONiijEC+BhgRGYfbrz0y4oa+Z5y/iw5yVVkVimisUKSFHn6RC1I9bjEhOhxGWmKZv//9lVPDHor1Zv9UP9kGG89YN+C0qZhfB4aRukIbI9wka3m5w5g+F30zarWvQ+OdTi7rGrRHTjfgI4HNaJFypJN3JpIwOsJtCyA8xoalyo9+9nn+B7Ca/JVV7C7B71y3rH8DXjLZ+43iMieAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAklEQVQ4je3VQUrDQBTG8V9jsvMSAYt1aXfWE3gL915AdCdYFx5CPYUn0IKgrqVCriC6NKQuZoJtkCatS/1gmAzD++fNm5lvehaVYx9bSCxXhVfcoWhOZrhAidmKrYyxGaQReIZjfOAaz/hsyTDDLg5j7Awn9TJLvGO7BfKTBjGREnkq1GwjZvYSxwcdYbdCDW9whFEqbABhmbCH047Atwh8jON+4ns322q2THVs0nY0VtY/8K8Aq/id/YJTx1apYEGEi36FCc47giaxH8Z+yqI5DNbIbkfDHApcChb0IFz0J93sayjY16bgicX85Nj6BjuODL3GX3OM0NftCZjifj6zL9t8TyFzA/CyAAAAAElFTkSuQmCC";  select_square.classList.replace("nocheck", "check");  name_span.classList.add("tableSelected");  name_span.title="";  setupAccessoryView(new_outfit, true);  }  }  }  function manipulateAccessories(accessory_name_span, remove=false) {  var i;  accessory_name=accessory_name_span.getAttribute("accessoryname");  accessory_state=accessory_name_span.getAttribute("accessorystate");  outfit=document.querySelector("#AccessoryBuilderOutfit").name;  acc_check=accessory_name_span.querySelectorAll(".alignMiddleImg")[0];  new_access_name=properAccessoryNameParams(accessory_name, accessory_state);  accessories_to_fix=[];  if (remove) {  references_to_accessories_on=references_to_accessories_on.filter(  (item) => item !== new_access_name  );  names_of_accessories_on=names_of_accessories_on.filter((item) => item !== accessory_name);  accessory_name_span.onclick=function () {  manipulateAccessories(this);  };  acc_check.src= "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDctMDNUMTM6NTI6NDItMDYwMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiCiAgIHBob3Rvc2hvcDpEYXRlQ3JlYXRlZD0iMjAyMy0wNy0wM1QxMzo1Mjo0Mi0wNjAwIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIyMCIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjIwIgogICBleGlmOkNvbG9yU3BhY2U9IjEiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMjAiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjIwIgogICB0aWZmOlJlc29sdXRpb25Vbml0PSIyIgogICB0aWZmOlhSZXNvbHV0aW9uPSI3Mi8xIgogICB0aWZmOllSZXNvbHV0aW9uPSI3Mi8xIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0icHJvZHVjZWQiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFmZmluaXR5IFBob3RvIDIgMi4xLjEiCiAgICAgIHN0RXZ0OndoZW49IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0iciI/PsqWhVcAAAGBaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRuUtDQRCHvyRKxIMIEbGwCKJWRmKUoI1FgheoRRLBq0leLiHH470ECbaCraAg2ngV+hdoK1gLgqIIYqu1oo2G57xEiIiZZXa+/e3OsDsL1nBayeh1Hshk81pwwu+aX1h02Z+xY8PJEO0RRVdnQuNhatrHHRYz3rjNWrXP/WtNsbiugKVBeFRRtbzwpPD0al41eVu4TUlFYsKnwn2aXFD41tSjFX4xOVnhL5O1cDAA1lZhV/IXR3+xktIywvJyujPpgvJzH/MlzfHsXEhil3gnOkEm8ONiijEC+BhgRGYfbrz0y4oa+Z5y/iw5yVVkVimisUKSFHn6RC1I9bjEhOhxGWmKZv//9lVPDHor1Zv9UP9kGG89YN+C0qZhfB4aRukIbI9wka3m5w5g+F30zarWvQ+OdTi7rGrRHTjfgI4HNaJFypJN3JpIwOsJtCyA8xoalyo9+9nn+B7Ca/JVV7C7B71y3rH8DXjLZ+43iMieAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7ElEQVQ4je3VP0oDQRTH8U/GbOclFgzG0pTxMh5DLC1i4SX0MFoImlaJkDto6bKxeLO4CZJN1lJ/MMzA8H7z3vz5zsC6SpzhCMl21XjDPZabkwWuUWG1Z6tybAHDbHiFC3zgFnN8dmRY4BTnOXaFy6bMCu847jD5SeOcSIUyiT07yJm99jB8wV32mCZxAESZffWU+1HyfZpde7ZNTWzquhp769/wrxjWeVz8wqeJrZNAEPHQ+2qS+wXrcBj3MDvRgsNQwPFGIOhRPPRnu+FrIvB1KJi4bE/O9AfsLHsYbKxaYoqR3b6ABR7amX0BUYVIcK45KfQAAAAASUVORK5CYII=";  acc_check.classList.replace("check", "nocheck");  } else {  indexOfOutfit=getIndexOfOutfit(outfit, character.poses[selectedPose].outfits);  if (names_of_accessories_on.includes(accessory_name)) {  accessories_to_fix=references_to_accessories_on.filter((item) =>  item.startsWith(accessory_name + "_")  );  references_to_accessories_on=references_to_accessories_on.filter(  (item) => !item.startsWith(accessory_name + "_")  );  } else {  names_of_accessories_on.push(accessory_name);  }  if (accessories_to_fix.length > 0) {  for (i of document.querySelectorAll('*[accessoryname="' + accessory_name + '"]')) {  i.onclick=function () {  manipulateAccessories(this);  };  }  }  references_to_accessories_on.push(new_access_name);  acc_check.src= "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDctMDNUMTM6NTI6NDItMDYwMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDctMDNUMTQ6MTE6NDAtMDY6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDctMDNUMTQ6MTE6NDAtMDY6MDAiCiAgIHBob3Rvc2hvcDpEYXRlQ3JlYXRlZD0iMjAyMy0wNy0wM1QxMzo1Mjo0Mi0wNjAwIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIyMCIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjIwIgogICBleGlmOkNvbG9yU3BhY2U9IjEiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMjAiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjIwIgogICB0aWZmOlJlc29sdXRpb25Vbml0PSIyIgogICB0aWZmOlhSZXNvbHV0aW9uPSI3Mi8xIgogICB0aWZmOllSZXNvbHV0aW9uPSI3Mi8xIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0icHJvZHVjZWQiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFmZmluaXR5IFBob3RvIDIgMi4xLjEiCiAgICAgIHN0RXZ0OndoZW49IjIwMjMtMDctMDNUMTQ6MTE6NDAtMDY6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0iciI/PohIZ3IAAAGBaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRuUtDQRCHvyRKxIMIEbGwCKJWRmKUoI1FgheoRRLBq0leLiHH470ECbaCraAg2ngV+hdoK1gLgqIIYqu1oo2G57xEiIiZZXa+/e3OsDsL1nBayeh1Hshk81pwwu+aX1h02Z+xY8PJEO0RRVdnQuNhatrHHRYz3rjNWrXP/WtNsbiugKVBeFRRtbzwpPD0al41eVu4TUlFYsKnwn2aXFD41tSjFX4xOVnhL5O1cDAA1lZhV/IXR3+xktIywvJyujPpgvJzH/MlzfHsXEhil3gnOkEm8ONiijEC+BhgRGYfbrz0y4oa+Z5y/iw5yVVkVimisUKSFHn6RC1I9bjEhOhxGWmKZv//9lVPDHor1Zv9UP9kGG89YN+C0qZhfB4aRukIbI9wka3m5w5g+F30zarWvQ+OdTi7rGrRHTjfgI4HNaJFypJN3JpIwOsJtCyA8xoalyo9+9nn+B7Ca/JVV7C7B71y3rH8DXjLZ+43iMieAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAklEQVQ4je3VQUrDQBTG8V9jsvMSAYt1aXfWE3gL915AdCdYFx5CPYUn0IKgrqVCriC6NKQuZoJtkCatS/1gmAzD++fNm5lvehaVYx9bSCxXhVfcoWhOZrhAidmKrYyxGaQReIZjfOAaz/hsyTDDLg5j7Awn9TJLvGO7BfKTBjGREnkq1GwjZvYSxwcdYbdCDW9whFEqbABhmbCH047Atwh8jON+4ns322q2THVs0nY0VtY/8K8Aq/id/YJTx1apYEGEi36FCc47giaxH8Z+yqI5DNbIbkfDHApcChb0IFz0J93sayjY16bgicX85Nj6BjuODL3GX3OM0NftCZjifj6zL9t8TyFzA/CyAAAAAElFTkSuQmCC";  acc_check.classList.replace("nocheck", "check");  accessory_name_span.onclick=function () {  manipulateAccessories(this, true);  };  }  for (i of document.querySelectorAll(".accessoryLine")) {  acc_check=i.querySelectorAll(".alignMiddleImg")[0];  accessory_name_span=i.querySelectorAll(".alignMiddle")[0];  if (references_to_accessories_on.includes(i.textContent)) {  i.classList.add("tableSelected");  acc_check.src= "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDctMDNUMTM6NTI6NDItMDYwMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDctMDNUMTQ6MTE6NDAtMDY6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDctMDNUMTQ6MTE6NDAtMDY6MDAiCiAgIHBob3Rvc2hvcDpEYXRlQ3JlYXRlZD0iMjAyMy0wNy0wM1QxMzo1Mjo0Mi0wNjAwIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIyMCIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjIwIgogICBleGlmOkNvbG9yU3BhY2U9IjEiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMjAiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjIwIgogICB0aWZmOlJlc29sdXRpb25Vbml0PSIyIgogICB0aWZmOlhSZXNvbHV0aW9uPSI3Mi8xIgogICB0aWZmOllSZXNvbHV0aW9uPSI3Mi8xIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0icHJvZHVjZWQiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFmZmluaXR5IFBob3RvIDIgMi4xLjEiCiAgICAgIHN0RXZ0OndoZW49IjIwMjMtMDctMDNUMTQ6MTE6NDAtMDY6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0iciI/PohIZ3IAAAGBaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRuUtDQRCHvyRKxIMIEbGwCKJWRmKUoI1FgheoRRLBq0leLiHH470ECbaCraAg2ngV+hdoK1gLgqIIYqu1oo2G57xEiIiZZXa+/e3OsDsL1nBayeh1Hshk81pwwu+aX1h02Z+xY8PJEO0RRVdnQuNhatrHHRYz3rjNWrXP/WtNsbiugKVBeFRRtbzwpPD0al41eVu4TUlFYsKnwn2aXFD41tSjFX4xOVnhL5O1cDAA1lZhV/IXR3+xktIywvJyujPpgvJzH/MlzfHsXEhil3gnOkEm8ONiijEC+BhgRGYfbrz0y4oa+Z5y/iw5yVVkVimisUKSFHn6RC1I9bjEhOhxGWmKZv//9lVPDHor1Zv9UP9kGG89YN+C0qZhfB4aRukIbI9wka3m5w5g+F30zarWvQ+OdTi7rGrRHTjfgI4HNaJFypJN3JpIwOsJtCyA8xoalyo9+9nn+B7Ca/JVV7C7B71y3rH8DXjLZ+43iMieAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAklEQVQ4je3VQUrDQBTG8V9jsvMSAYt1aXfWE3gL915AdCdYFx5CPYUn0IKgrqVCriC6NKQuZoJtkCatS/1gmAzD++fNm5lvehaVYx9bSCxXhVfcoWhOZrhAidmKrYyxGaQReIZjfOAaz/hsyTDDLg5j7Awn9TJLvGO7BfKTBjGREnkq1GwjZvYSxwcdYbdCDW9whFEqbABhmbCH047Atwh8jON+4ns322q2THVs0nY0VtY/8K8Aq/id/YJTx1apYEGEi36FCc47giaxH8Z+yqI5DNbIbkfDHApcChb0IFz0J93sayjY16bgicX85Nj6BjuODL3GX3OM0NftCZjifj6zL9t8TyFzA/CyAAAAAElFTkSuQmCC";  acc_check.classList.replace("nocheck", "check");  accessory_name_span.title="Remove " + i.textContent;  } else {  i.classList.remove("tableSelected");  acc_check.src= "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDctMDNUMTM6NTI6NDItMDYwMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiCiAgIHBob3Rvc2hvcDpEYXRlQ3JlYXRlZD0iMjAyMy0wNy0wM1QxMzo1Mjo0Mi0wNjAwIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIyMCIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjIwIgogICBleGlmOkNvbG9yU3BhY2U9IjEiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMjAiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjIwIgogICB0aWZmOlJlc29sdXRpb25Vbml0PSIyIgogICB0aWZmOlhSZXNvbHV0aW9uPSI3Mi8xIgogICB0aWZmOllSZXNvbHV0aW9uPSI3Mi8xIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0icHJvZHVjZWQiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFmZmluaXR5IFBob3RvIDIgMi4xLjEiCiAgICAgIHN0RXZ0OndoZW49IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0iciI/PsqWhVcAAAGBaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRuUtDQRCHvyRKxIMIEbGwCKJWRmKUoI1FgheoRRLBq0leLiHH470ECbaCraAg2ngV+hdoK1gLgqIIYqu1oo2G57xEiIiZZXa+/e3OsDsL1nBayeh1Hshk81pwwu+aX1h02Z+xY8PJEO0RRVdnQuNhatrHHRYz3rjNWrXP/WtNsbiugKVBeFRRtbzwpPD0al41eVu4TUlFYsKnwn2aXFD41tSjFX4xOVnhL5O1cDAA1lZhV/IXR3+xktIywvJyujPpgvJzH/MlzfHsXEhil3gnOkEm8ONiijEC+BhgRGYfbrz0y4oa+Z5y/iw5yVVkVimisUKSFHn6RC1I9bjEhOhxGWmKZv//9lVPDHor1Zv9UP9kGG89YN+C0qZhfB4aRukIbI9wka3m5w5g+F30zarWvQ+OdTi7rGrRHTjfgI4HNaJFypJN3JpIwOsJtCyA8xoalyo9+9nn+B7Ca/JVV7C7B71y3rH8DXjLZ+43iMieAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7ElEQVQ4je3VP0oDQRTH8U/GbOclFgzG0pTxMh5DLC1i4SX0MFoImlaJkDto6bKxeLO4CZJN1lJ/MMzA8H7z3vz5zsC6SpzhCMl21XjDPZabkwWuUWG1Z6tybAHDbHiFC3zgFnN8dmRY4BTnOXaFy6bMCu847jD5SeOcSIUyiT07yJm99jB8wV32mCZxAESZffWU+1HyfZpde7ZNTWzquhp769/wrxjWeVz8wqeJrZNAEPHQ+2qS+wXrcBj3MDvRgsNQwPFGIOhRPPRnu+FrIvB1KJi4bE/O9AfsLHsYbKxaYoqR3b6ABR7amX0BUYVIcK45KfQAAAAASUVORK5CYII=";  acc_check.classList.replace("check", "nocheck");  accessory_name_span.title="Add " + i.textContent;  }  }  setupAccessoryView(outfit, true);  }  function shouldOffAccessoryNotBeDisplayed(accessory_object, indexOfOutfit) {  if (!accessory_object.path.includes("/off.")) {  return false;  }  if (names_of_accessories_on.includes(accessory_object.name)) {  on_accessory=references_to_accessories_on.filter((item) =>  item.startsWith(accessory_object.name)  )[0];  for (var i of character.poses[selectedPose].outfits[indexOfOutfit].on_accessories) {  if (on_accessory==properAccessoryName(i)) {  return true;  }  }  }  return false;  }  function setupAccessoryView(outfit=undefined, clearBefore=false) {  var i;  if (outfit==undefined) {  outfit=character.poses[selectedPose].default_outfit;  }  if (clearBefore) {  document.querySelector("#topLevelAccess").remove();  }  indexOfOutfit=getIndexOfOutfit(outfit, character.poses[selectedPose].outfits);  out_start=character.poses[selectedPose].outfit_path;  accessChar=document.createElement("div");  accessChar.id="topLevelAccess";  accessChar.classList.add("characterAccess");  zindex_count=0;  if (document.querySelectorAll(".elementHeaderLineAccessories").length > 0) {  accessChar.onclick=outputAccessoryCopyString;  accessChar.title="Copy the Renpy command to clear equipped accessories";  } else {  accessChar.classList.add("disallowHover");  }  for (i of getLayeringOrderWithAccessories(out_start, outfit, character.poses[selectedPose])) {  img=document.createElement("img");  if (i instanceof Object) {  if (shouldOffAccessoryNotBeDisplayed(i, indexOfOutfit)) {  continue;  }  image_path=i.path;  img.style.height=i.access_height + "px";  img.classList.add("characterImagesAcessory");  } else {  image_path=i;  img.classList.add("characterImagesOutfitAccessoryViews");  img.id="AccessoryBuilderOutfit";  img.name=outfit;  }  img.style.zIndex=zindex_count;  img.src=makeUrlCompatible(image_path);  img.alt=image_path.split("/").pop().split(".")[0];  accessChar.appendChild(img);  zindex_count++;  }  if (references_to_accessories_on.length > 0) {  accessChar.title="Copy the Renpy command to equip selected accessories";  }  document.querySelector("#accessoryBuilder").append(accessChar);  }  function swapHideDivDisplay(swap_to_number_string, first_time=false) {  if (swap_to_number_string==undefined) {  swap_to_number_string=sessionStorage.getItem("outoracc");  swap_to_number_string=swap_to_number_string=="0" ? "1" : "0";  }  if (parseTextBool(sessionStorage.getItem("areOutfitsHidden")) && !first_time) {  } else if (swap_to_number_string=="0") {  imageList.classList.remove("hidden");  accessoryBuilder.classList.add("hidden");  sessionStorage.setItem("outoracc", "0");  } else {  imageList.classList.add("hidden");  accessoryBuilder.classList.remove("hidden");  sessionStorage.setItem("outoracc", "1");  }  if (!outfitsSelect.classList.contains("disallowHover") || first_time) {  hideDivSelectionButtonsFixFormatting(swap_to_number_string);  }  calculateImageListMaxHeight();  }  function hideDivSelectionButtonsFixFormatting(swap_to_number_string) {  if (swap_to_number_string=="0") {  outfitsSelect.classList.replace(  "hideDivSelectionButtonsAllowHover",  "hideDivSelectionButtonsUnderline"  );  outfitsSelect.title="";  accessorySelect.classList.replace(  "hideDivSelectionButtonsUnderline",  "hideDivSelectionButtonsAllowHover"  );  accessorySelect.title="Show accessories";  } else {  outfitsSelect.classList.replace(  "hideDivSelectionButtonsUnderline",  "hideDivSelectionButtonsAllowHover"  );  outfitsSelect.title="Show outfits";  accessorySelect.classList.replace(  "hideDivSelectionButtonsAllowHover",  "hideDivSelectionButtonsUnderline"  );  accessorySelect.title="";  }  }  function getProperOutfitName(outfit_path) {  span_name=outfit_path.split("/");  return span_name.length > 1 ? span_name[0] : span_name[0].split(".")[0];  }  String.prototype.rsplit=function (sep, maxsplit=0) {  var split=this.split(sep);  return maxsplit ? [split.slice(0, -maxsplit).join(sep)].concat(split.slice(-maxsplit)) : split;  };  var disable_keys=parseTextBool(sessionStorage.getItem("disable_keys"));  if (disable_keys==false) {  sessionStorage.setItem("disable_keys", false);  disable_keys=false;  }  document.querySelector("#ToggleText").textContent=disable_keys  ? "Keyboard shortcuts are disabled."  : "Keyboard shortcuts are enabled.";  scenario="Class Swap";var characterArray=[['amaria', 'a', 2], ['amaria', 'b', 2], ['brenda', 'a', 2], ['brenda', 'b', 2], ['cornelia', 'a', 2], ['cornelia', 'b', 2], ['erica', 'a', 3], ['erica', 'b', 3], ['erica', 'c', 3], ['iroha', 'a', 2], ['iroha', 'b', 2], ['izuna', 'a', 5], ['izuna', 'aears', 5], ['izuna', 'b', 5], ['izuna', 'bears', 5], ['izuna', 'sword', 5], ['marin', 'a', 3], ['marin', 'b', 3], ['marin', 'c', 3], ['phila', 'a', 2], ['phila', 'b', 2], ['sadie', 'a', 1], ['tori', 'a', 2], ['tori', 'b', 2], ['watson', 'a', 2], ['watson', 'b', 2]]; var jsonData={ "amaria": {"name": "amaria", "poses" :{"a" : {"max_face_height": 205, "face_path": "characters/amaria/a/faces/face/", "faces": ['0.png', '1.png'], "outfit_path": "characters/amaria/a/outfits/", "default_outfit" : "uniform/uniform.png", "default_accessories" : [ {"path" : "uniform/hair+1/off.png","layer" :  "+1","main_height" :  111},   ], "default_left_crop" : 170, "default_right_crop" : 446,"default_top_crop" : 28,"accessory_names" : [{"name" : "bracelets", "state" : ""}, {"name" : "face_test", "state" : ""}, {"name" : "facepaint", "state" : ""}, {"name" : "hair", "state" : "ponytail"}, {"name" : "hairband", "state" : ""}, ], "outfits": [{"path" : "brad.webp", "off_accessories" : [], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 160, "access_height" : 320},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "face_test", "state" : "", "path" : "acc_face_test/on.png", "layer" : "0", "main_height" : 56, "access_height" : 113},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "casual/casual.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "casual/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 160, "access_height" : 320},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "face_test", "state" : "", "path" : "acc_face_test/on.png", "layer" : "0", "main_height" : 56, "access_height" : 113},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "casual2/casual2.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "casual2/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 160, "access_height" : 320},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "face_test", "state" : "", "path" : "acc_face_test/on.png", "layer" : "0", "main_height" : 56, "access_height" : 113},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "gym/gym.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "gym/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 160, "access_height" : 320},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "face_test", "state" : "", "path" : "acc_face_test/on.png", "layer" : "0", "main_height" : 56, "access_height" : 113},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "nude/nude.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "nude/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 160, "access_height" : 320},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "face_test", "state" : "", "path" : "acc_face_test/on.png", "layer" : "0", "main_height" : 56, "access_height" : 113},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "uniform/uniform.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "uniform/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 160, "access_height" : 320},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "face_test", "state" : "", "path" : "acc_face_test/on.png", "layer" : "0", "main_height" : 56, "access_height" : 113},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]}]}, "b" : {"max_face_height": 205, "face_path": "characters/amaria/b/faces/face/", "faces": ['0.png', '1.png'], "outfit_path": "characters/amaria/b/outfits/", "default_outfit" : "uniform/uniform.png", "default_accessories" : [ {"path" : "uniform/hair+1/off.png","layer" :  "+1","main_height" :  111},   ], "default_left_crop" : 255, "default_right_crop" : 446,"default_top_crop" : 28,"accessory_names" : [{"name" : "bracelets", "state" : ""}, {"name" : "facepaint", "state" : ""}, {"name" : "hair", "state" : "bun"}, {"name" : "hair", "state" : "doublebun"}, {"name" : "hair", "state" : "ponytail"}, {"name" : "hairband", "state" : ""}, ], "outfits": [{"path" : "casual/casual.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "casual/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 162, "access_height" : 323},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "bun", "path" : "acc_hair-1/on_bun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "doublebun", "path" : "acc_hair-1/on_doublebun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "casual_book/casual_book.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "casual_book/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "casual_book/bracelets/on.png", "layer" : "0", "main_height" : 162, "access_height" : 323},{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 162, "access_height" : 323},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "bun", "path" : "acc_hair-1/on_bun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "doublebun", "path" : "acc_hair-1/on_doublebun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "gym/gym.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "gym/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 162, "access_height" : 323},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "bun", "path" : "acc_hair-1/on_bun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "doublebun", "path" : "acc_hair-1/on_doublebun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "nude/nude.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "nude/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 162, "access_height" : 323},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "bun", "path" : "acc_hair-1/on_bun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "doublebun", "path" : "acc_hair-1/on_doublebun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]},{"path" : "uniform/uniform.png", "off_accessories" : [{"name" : "hair", "state" : "", "path" : "uniform/hair+1/off.png", "layer" : "+1", "main_height" : 111, "access_height" : 223}], "on_accessories" : [{"name" : "bracelets", "state" : "", "path" : "acc_bracelets/on.png", "layer" : "0", "main_height" : 162, "access_height" : 323},{"name" : "facepaint", "state" : "", "path" : "acc_facepaint+3/on.png", "layer" : "+3", "main_height" : 48, "access_height" : 96},{"name" : "hair", "state" : "bun", "path" : "acc_hair-1/on_bun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "doublebun", "path" : "acc_hair-1/on_doublebun.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hair", "state" : "ponytail", "path" : "acc_hair-1/on_ponytail.png", "layer" : "-1", "main_height" : 63, "access_height" : 125},{"name" : "hairband", "state" : "", "path" : "acc_hairband+2/on.png", "layer" : "+2", "main_height" : 43, "access_height" : 85}]}]}, }},"brenda": {"name": "brenda", "poses" :{"a" : {"max_face_height": 261, "face_path": "characters/brenda/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/brenda/a/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 166, "default_right_crop" : 389,"default_top_crop" : 54,"accessory_names" : [], "outfits": [{"path" : "dress.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gothloli.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "suit.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 270, "face_path": "characters/brenda/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp'], "outfit_path": "characters/brenda/b/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 183, "default_right_crop" : 439,"default_top_crop" : 62,"accessory_names" : [], "outfits": [{"path" : "dress.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gothloli.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "suit.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"cornelia": {"name": "cornelia", "poses" :{"a" : {"max_face_height": 201, "face_path": "characters/cornelia/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp', '8.webp', '9.webp', '10.webp', '11.webp', '12.webp', '13.webp', '14.webp', '15.webp', '16.webp', '17.webp', '18.webp', '19.webp', '20.webp', '21.webp', '22.webp'], "outfit_path": "characters/cornelia/a/outfits/", "default_outfit" : "gym2.webp", "default_accessories" : [   ], "default_left_crop" : 70, "default_right_crop" : 363,"default_top_crop" : 6,"accessory_names" : [], "outfits": [{"path" : "gym.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gym2.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 217, "face_path": "characters/cornelia/b/faces/mutations/", "faces": ['twintails/face/0.webp', 'twintails/face/1.webp', 'twintails/face/2.webp', 'twintails/face/3.webp', 'twintails/face/4.webp', 'twintails/face/5.webp', 'twintails/face/6.webp', 'twintails/face/7.webp', 'twintails/face/8.webp', 'twintails/face/9.webp', 'twintails/face/10.webp', 'twintails/face/11.webp', 'twintails/face/12.webp', 'twintails/face/13.webp', 'twintails/face/14.webp', 'twintails/face/15.webp', 'twintails/face/16.webp', 'twintails/face/17.webp', 'twintails/face/18.webp', 'twintails/face/19.webp', 'twintails/face/20.webp', 'twintails/face/21.webp', 'twintails/face/22.webp', 'twintails/face/23.webp', 'twintails/face/24.webp', 'twintails/face/25.webp', 'twintails/face/26.webp', 'twintails/face/27.webp', 'twintails/face/28.webp', 'twintails/face/29.webp', 'twintails/face/30.webp', 'twintails/face/31.webp', 'twintails/face/32.webp', 'twintails/face/33.webp', 'twintails/face/34.webp'], "outfit_path": "characters/cornelia/b/outfits/", "default_outfit" : "uniform/uniform.webp", "default_accessories" : [ {"path" : "uniform/ponytail/off.webp","layer" :  "0","main_height" :  200},   ], "default_left_crop" : 14, "default_right_crop" : 425,"default_top_crop" : 14,"accessory_names" : [{"name" : "ponytail", "state" : ""}, ], "outfits": [{"path" : "uniform/uniform.webp", "off_accessories" : [{"name" : "ponytail", "state" : "", "path" : "uniform/ponytail/off.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}], "on_accessories" : [{"name" : "ponytail", "state" : "", "path" : "uniform/ponytail/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]}]}, }},"erica": {"name": "erica", "poses" :{"a" : {"max_face_height": 251, "face_path": "characters/erica/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/erica/a/outfits/", "default_outfit" : "uniform/uniform.webp", "default_accessories" : [   ], "default_left_crop" : 100, "default_right_crop" : 329,"default_top_crop" : 0,"accessory_names" : [{"name" : "command_spell", "state" : ""}, {"name" : "command_spell1", "state" : ""}, {"name" : "command_spell2", "state" : ""}, ], "outfits": [{"path" : "casual/casual.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "casual/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "casual/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "casual/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "gown/gown.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "gown/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "gown/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "gown/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "kimono/kimono.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "kimono/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "kimono/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "kimono/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "traditional/traditional.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "traditional/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "traditional/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "traditional/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "uniform/uniform.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "uniform/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "uniform/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "uniform/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "uniform_b/uniform_b.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "uniform_b/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "uniform_b/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "uniform_b/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "uniform_c/uniform_c.webp", "off_accessories" : [], "on_accessories" : [{"name" : "command_spell", "state" : "", "path" : "uniform_c/command_spell/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell1", "state" : "", "path" : "uniform_c/command_spell1/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400},{"name" : "command_spell2", "state" : "", "path" : "uniform_c/command_spell2/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]}]}, "b" : {"max_face_height": 243, "face_path": "characters/erica/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/erica/b/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 71, "default_right_crop" : 326,"default_top_crop" : 0,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gown.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "kimono.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "traditional.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform_b.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform_c.webp", "off_accessories" : [], "on_accessories" : []}]}, "c" : {"max_face_height": 240, "face_path": "characters/erica/c/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/erica/c/outfits/", "default_outfit" : "casual.webp", "default_accessories" : [   ], "default_left_crop" : 140, "default_right_crop" : 431,"default_top_crop" : 6,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gown.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "kimono.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "traditional.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform_c.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"iroha": {"name": "iroha", "poses" :{"a" : {"max_face_height": 211, "face_path": "characters/iroha/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/iroha/a/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 105, "default_right_crop" : 327,"default_top_crop" : 31,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "maid.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform_b.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 215, "face_path": "characters/iroha/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/iroha/b/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 182, "default_right_crop" : 407,"default_top_crop" : 28,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "maid.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform_b.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"izuna": {"name": "izuna", "poses" :{"a" : {"max_face_height": 220, "face_path": "characters/izuna/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp', '8.webp'], "outfit_path": "characters/izuna/a/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 222, "default_right_crop" : 482,"default_top_crop" : 26,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "casualb.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "casualbb.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gym.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniforms.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniformsnoband.webp", "off_accessories" : [], "on_accessories" : []}]}, "aears" : {"max_face_height": 220, "face_path": "characters/izuna/aears/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp', '8.webp'], "outfit_path": "characters/izuna/aears/outfits/", "default_outfit" : "casualb.webp", "default_accessories" : [   ], "default_left_crop" : 210, "default_right_crop" : 483,"default_top_crop" : 15,"accessory_names" : [], "outfits": [{"path" : "casualb.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "casualbb.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 210, "face_path": "characters/izuna/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp'], "outfit_path": "characters/izuna/b/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 204, "default_right_crop" : 461,"default_top_crop" : 14,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "casualb.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, "bears" : {"max_face_height": 210, "face_path": "characters/izuna/bears/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp'], "outfit_path": "characters/izuna/bears/outfits/", "default_outfit" : "casualb.webp", "default_accessories" : [   ], "default_left_crop" : 204, "default_right_crop" : 461,"default_top_crop" : 14,"accessory_names" : [], "outfits": [{"path" : "casualb.webp", "off_accessories" : [], "on_accessories" : []}]}, "sword" : {"max_face_height": 220, "face_path": "characters/izuna/sword/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp'], "outfit_path": "characters/izuna/sword/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 210, "default_right_crop" : 483,"default_top_crop" : 15,"accessory_names" : [], "outfits": [{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"marin": {"name": "marin", "poses" :{"a" : {"max_face_height": 456, "face_path": "characters/marin/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp'], "outfit_path": "characters/marin/a/outfits/", "default_outfit" : "casual.webp", "default_accessories" : [   ], "default_left_crop" : 162, "default_right_crop" : 543,"default_top_crop" : 126,"accessory_names" : [], "outfits": [{"path" : "bathrobe.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "fashion.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "magical.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "pj.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "swimsuit2.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 456, "face_path": "characters/marin/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp'], "outfit_path": "characters/marin/b/outfits/", "default_outfit" : "casual.webp", "default_accessories" : [   ], "default_left_crop" : 162, "default_right_crop" : 543,"default_top_crop" : 126,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "fashion.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "magical.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "pj.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "swimsuit2.webp", "off_accessories" : [], "on_accessories" : []}]}, "c" : {"max_face_height": 456, "face_path": "characters/marin/c/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp'], "outfit_path": "characters/marin/c/outfits/", "default_outfit" : "casual.webp", "default_accessories" : [   ], "default_left_crop" : 162, "default_right_crop" : 543,"default_top_crop" : 126,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "fashion.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "magical.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "pj.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "swimsuit2.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"phila": {"name": "phila", "poses" :{"a" : {"max_face_height": 171, "face_path": "characters/phila/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp', '8.webp', '9.webp'], "outfit_path": "characters/phila/a/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 26, "default_right_crop" : 292,"default_top_crop" : 0,"accessory_names" : [], "outfits": [{"path" : "dress.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "swimsuit.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 171, "face_path": "characters/phila/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp', '8.webp'], "outfit_path": "characters/phila/b/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 91, "default_right_crop" : 306,"default_top_crop" : 5,"accessory_names" : [], "outfits": [{"path" : "dress.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gym.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"sadie": {"name": "sadie", "poses" :{"a" : {"max_face_height": 269, "face_path": "characters/sadie/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/sadie/a/outfits/", "default_outfit" : "uniform/uniform.webp", "default_accessories" : [ {"path" : "uniform/hairdown/off.webp","layer" :  "0","main_height" :  200},   ], "default_left_crop" : 66, "default_right_crop" : 428,"default_top_crop" : 21,"accessory_names" : [{"name" : "hairdown", "state" : ""}, ], "outfits": [{"path" : "casual/casual.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual/hairdown/off.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual/hairdown/on.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}]},{"path" : "casual_b/casual_b.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual_b/hairdown/off.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual_b/hairdown/on.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}]},{"path" : "casual_madie/casual.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual_madie/hairdown/off.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual_madie/hairdown/on.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}]},{"path" : "casual_madie_b/casual_b.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual_madie_b/hairdown/off.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "casual_madie_b/hairdown/on.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}]},{"path" : "cheer.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "cheer_madie.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "sleepwear/sleepwear.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "sleepwear/hairdown/off.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "sleepwear/hairdown/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "sleepwear_madie/sleepwear.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "sleepwear_madie/hairdown/off.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "sleepwear_madie/hairdown/on.webp", "layer" : "0", "main_height" : 114, "access_height" : 229}]},{"path" : "uniform/uniform.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "uniform/hairdown/off.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "uniform/hairdown/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]},{"path" : "uniform_madie/uniform_madie.webp", "off_accessories" : [{"name" : "hairdown", "state" : "", "path" : "uniform_madie/hairdown/off.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}], "on_accessories" : [{"name" : "hairdown", "state" : "", "path" : "uniform_madie/hairdown/on.webp", "layer" : "0", "main_height" : 200, "access_height" : 400}]}]}, }},"tori": {"name": "tori", "poses" :{"a" : {"max_face_height": 236, "face_path": "characters/tori/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/tori/a/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 95, "default_right_crop" : 306,"default_top_crop" : 0,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "fancy.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "gym.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 238, "face_path": "characters/tori/b/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp', '7.webp'], "outfit_path": "characters/tori/b/outfits/", "default_outfit" : "uniform.webp", "default_accessories" : [   ], "default_left_crop" : 95, "default_right_crop" : 417,"default_top_crop" : 17,"accessory_names" : [], "outfits": [{"path" : "casual.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "formal.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "swimsuit.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "uniform.webp", "off_accessories" : [], "on_accessories" : []}]}, }},"watson": {"name": "watson", "poses" :{"a" : {"max_face_height": 250, "face_path": "characters/watson/a/faces/face/", "faces": ['0.webp', '1.webp', '2.webp', '3.webp', '4.webp', '5.webp', '6.webp'], "outfit_path": "characters/watson/a/outfits/", "default_outfit" : "coat.webp", "default_accessories" : [   ], "default_left_crop" : 156, "default_right_crop" : 373,"default_top_crop" : 2,"accessory_names" : [], "outfits": [{"path" : "coat.webp", "off_accessories" : [], "on_accessories" : []},{"path" : "coat_glasses.webp", "off_accessories" : [], "on_accessories" : []}]}, "b" : {"max_face_height": 789, "face_path": "characters/watson/b/faces/face/", "faces": ['0.webp'], "outfit_path": "characters/watson/b/outfits/", "default_outfit" : "mask.webp", "default_accessories" : [   ], "default_left_crop" : 77, "default_right_crop" : 609,"default_top_crop" : 1,"accessory_names" : [], "outfits": [{"path" : "mask.webp", "off_accessories" : [], "on_accessories" : []}]}, }},}; /*Start*/ titleExtra.textContent="";  indexLen=characterArray.length - 1;  file_name=location.pathname.split("/").pop() || ".";  var max_poses=Math.max(...characterArray.map((o) => o[2]));  var static_url_addons="";  function* enumerate(it, start=0) {  let i=start;  for (const x of it) yield [i++, x];  }  const urlParams=new URLSearchParams(window.location.search);  var newURL=new URL(location.protocol + "//" + location.host + location.pathname);  var homeURL=new URL(location.protocol + "//" + location.host + location.pathname);  var pose_filter= urlParams.get("pcount") && /^\d+$/.test(urlParams.get("pcount"))  ? parseInt(urlParams.get("pcount"))  : 1;  if (pose_filter > max_poses) {  pose_filter=max_poses;  }  var outfit_filter=urlParams.get("outfitview") && /^[1]$/.test(urlParams.get("outfitview")) ? true : false;  if (outfit_filter) {  newURL.searchParams.set("outfitview", "1");  homeURL.searchParams.set("outfitview", "1");  document.getElementById("imageList").classList.replace("characterswrap", "charactersrow");  scenario += " Outfit View";  }  if (pose_filter > 1) {  newURL.searchParams.set("pcount", pose_filter);  homeURL.searchParams.set("pcount", pose_filter);  }  document.getElementById("PoseHelp").innerHTML += " Current filter: >=" + pose_filter;  document.getElementById("OutfitHelp").innerHTML += outfit_filter ? "On" : "Off";  var selectedCharacter=urlParams.get("character") ? urlParams.get("character") : undefined;  var selectedPose=urlParams.get("pose") ? urlParams.get("pose") : undefined;  var body_name=urlParams.get("body_name") ? urlParams.get("body_name") : undefined;  if (selectedCharacter==undefined || selectedPose==undefined) {  selectedCharacter=undefined;  selectedPose=undefined;  body_name=undefined;  } else if (  selectedCharacter != undefined &&  (!(selectedCharacter in jsonData) || !(selectedPose in jsonData[selectedCharacter].poses))  ) {  selectedCharacter=undefined;  selectedPose=undefined;  body_name=undefined;  } else {  newURL.searchParams.set("character", selectedCharacter);  newURL.searchParams.set("pose", selectedPose);  if (body_name != undefined) {  newURL.searchParams.set("body_name", body_name);  }  }  window.history.replaceState(scenario, scenario, newURL.toString());  var rect_height=32;  if (selectedCharacter==undefined) {  document.querySelector("#title").addEventListener("click", function () {  document.querySelector("body").dispatchEvent(new KeyboardEvent("keydown", { code: "Enter" }));  });  if (outfit_filter) {  document.querySelector("#title").title="Swap to regular view";  } else {  document.querySelector("#title").title="Swap to outfit view";  }  document.querySelector("#renameCharacterBR1").remove();  document.querySelector("#renameCharacterBR2").remove();  document.querySelector("#hideButton").remove();  document.querySelector("#backbutton").remove();  document.querySelector("#navigationButtons").remove();  document.querySelector("#selectionButtonDiv").remove();  title.textContent=scenario;  var url2=new URL(newURL.toString());  Object.entries(jsonData).forEach(([character, characterData]) => {  if (pose_filter > 1 && Object.keys(characterData.poses).length < pose_filter) {  return;  }  url2.searchParams.set("character", character);  if (outfit_filter) {  Object.entries(characterData.poses).forEach(([pose, poseData]) => {  var outfits=poseData.outfits.map((outfit) => [  outfit.path,  outfit.path.split("/").pop(),  outfit.off_accessories,  ]);  url2.searchParams.set("pose", pose);  characterDiv=document.createElement("div");  characterDiv.classList.add("character");  span=document.createElement("span");  span.classList.add("characterNameSpan");  span.textContent=character + "_" + pose;  characterDiv.name=character + "_" + pose;  characterDiv.appendChild(span);  for (const outfit of outfits) {  charLink=document.createElement("a");  charLink.href=url2.toString();  charLink.title="View character sheet for " + character + "_" + pose;  characterDiv.appendChild(charLink);  outerDiv=document.createElement("div");  outerDiv.classList.add("outerDiv");  charLink.appendChild(outerDiv);  var default_outfit=getLayeringOrderOutfits(  poseData.outfit_path,  outfit[0],  outfit[2]  );  for (var i of default_outfit) {  img=document.createElement("img");  var image_path;  if (Array.isArray(i)) {  image_path=i[0];  img.style.height=i[1] + "px";  img.classList.add("characterImagesAcessory");  } else {  image_path=i;  img.classList.add("characterImagesOutfitMainViews");  }  img.src=makeUrlCompatible(image_path);  img.alt=image_path.split("/")[0].split(".")[0];  outerDiv.appendChild(img);  }  nameDiv=document.createElement("div");  nameDiv.classList.add("characterposename");  nameDiv.textContent=getProperOutfitName(outfit[0]);  outerDiv.appendChild(nameDiv);  }  characterDiv.addEventListener("mouseenter", function (evt) {  changeToFaceNumberingOutfit(this);  });  characterDiv.addEventListener("mouseleave", function (evt) {  changeToPoseOutfit(this);  });  document.querySelector("#imageList").append(characterDiv);  });  } else {  characterDiv=document.createElement("div");  characterDiv.classList.add("character");  span=document.createElement("span");  span.textContent=character;  characterDiv.appendChild(span);  Object.entries(characterData.poses).forEach(([pose, poseData]) => {  url2.searchParams.set("pose", pose);  var default_outfit=getLayeringOrder(  poseData.outfit_path,  poseData.default_outfit,  poseData  );  charLink=document.createElement("a");  charLink.href=url2.toString();  charLink.classList.add("mainPageHoverLink");  charLink.title="View character sheet for " + character + "_" + pose;  characterDiv.appendChild(charLink);  outerDiv=document.createElement("div");  outerDiv.classList.add("outerDiv");  charLink.appendChild(outerDiv);  for (var i of default_outfit) {  img=document.createElement("img");  var image_path;  if (Array.isArray(i)) {  image_path=i[0];  img.style.height=i[1] + "px";  img.classList.add("characterImagesAcessory");  } else {  image_path=i;  img.classList.add("characterImagesOutfitMainViews");  }  img.src=makeUrlCompatible(image_path);  img.alt=image_path.split("/")[0].split(".")[0];  outerDiv.appendChild(img);  }  nameDiv=document.createElement("div");  nameDiv.classList.add("characterposename");  nameDiv.textContent=pose;  outerDiv.name=character + "_" + pose;  outerDiv.addEventListener("mouseenter", function (evt) {  changeToFaceNumberingDefault(this);  });  outerDiv.addEventListener("mouseleave", function (evt) {  changeToPoseDefault(this);  });  outerDiv.appendChild(nameDiv);  });  document.querySelector("#imageList").appendChild(characterDiv);  }  });  } else {  leftButton.title="Switch to " + getTitleForMinusCharacter();  rightButton.title="Switch to " + getTitleForAddCharacter();  leftButton.addEventListener("click", function () {  switchCharactersMinus();  });  rightButton.addEventListener("click", function () {  switchCharactersAdd();  });  show_outfits=parseTextBool(sessionStorage.getItem("areOutfitsHidden"));  outfits_or_accessories=sessionStorage.getItem("outoracc");  if (outfits_or_accessories==undefined) {  sessionStorage.setItem("outoracc", "0");  /*0 is show outfits, 1 is show access*/ outfits_or_accessories="0";  }  title.textContent=selectedCharacter + "_" + selectedPose;  document.querySelector("#renameCharacter1").textContent= "Clicking on the outfits or faces will copy the text to change to that outfit or the show statement for face to your clipboard";  document.querySelector("#renameCharacter2").textContent= "Clicking on the page title will allow you to enter a new character for the copied text";  new_name=sessionStorage.getItem("body_name");  var character=jsonData[selectedCharacter];  const out_start=character.poses[selectedPose].outfit_path;  title.addEventListener("click", function () {  makeNewBody();  });  titleExtra.addEventListener("click", function () {  makeNewBody(selectedCharacter, true);  });  makeNewBody(body_name ? body_name : selectedCharacter);  hideButton.addEventListener("click", function () {  manipImageList();  });  document.querySelector("#backbutton").href=homeURL.toString();  characterContainer=document.createElement("div");  characterContainer.classList.add("character2Container");  let outfits=Object.keys(character.poses[selectedPose].outfits);  Object.entries(character.poses[selectedPose].outfits).forEach(([index, outfit]) => {  var outfitName=outfit.path.split("/").pop().split(".")[0];  var default_outfit=getLayeringOrderOutfits(out_start, outfit.path, outfit.off_accessories);  getLayeringOrderOutfits(out_start, outfit.path, outfit.on_accessories);  var char2=document.createElement("div");  char2.classList.add("character2");  char2.addEventListener("click", function () {  outputOutfitCopyString(outfitName);  });  for (var i of default_outfit) {  img=document.createElement("img");  var image_path;  if (Array.isArray(i)) {  image_path=i[0];  img.style.height=i[1] + "px";  img.classList.add("characterImagesAcessory");  } else {  image_path=i;  img.classList.add("characterImagesOutfitMainViews");  }  img.src=makeUrlCompatible(image_path);  img.alt=image_path.split("/")[0].split(".")[0];  char2.appendChild(img);  }  span_name=outfit.path.split("/");  span_name=getProperOutfitName(outfit.path);  outName=document.createElement("span");  outName.textContent=span_name;  char2.title="Copy the Renpy command to change the characters outfit to " + span_name;  char2.appendChild(outName);  characterContainer.appendChild(char2);  });  document.querySelector("#imageList").append(characterContainer);  var face_path=character.poses[selectedPose].face_path;  const image_padding=10;  var default_outfit=getLayeringOrderFlat(  out_start,  character.poses[selectedPose].default_outfit,  character.poses[selectedPose]  );  character.poses[selectedPose].faces=character.poses[selectedPose].faces.map(  (face) => face_path + face  );  namesDiv=document.createElement("div");  namesDiv.classList.add("characterAccessList");  namesDiv.classList.add("accessoryElementSelection");  names_of_accessories_on=[];  references_to_accessories_on=[];  outfitHeader=document.createElement("span");  outfitHeader.classList.add("elementHeaderLineOutfit");  outfitHeader.textContent="Outfits";  outfitHeader.title="Change outfits";  namesDiv.append(outfitHeader);  for (var i of character.poses[selectedPose].outfits) {  outfitDiv=document.createElement("div");  outfitSpan=document.createElement("span");  outfitDiv.classList.add("elementTableLine");  outfitDiv.classList.add("outfitLine");  outfitSpan.classList.add("alignMiddle");  span_name=getProperOutfitName(i.path);  outfitSpan.textContent=span_name;  outfitDiv.title="Show outfit " + span_name;  outfitDiv.name=i.path;  outfitDiv.addEventListener("click", function () {  changeAccessoryOutfit(this);  });  select_square=document.createElement("img");  select_square.src= "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDctMDNUMTM6NTI6NDItMDYwMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiCiAgIHBob3Rvc2hvcDpEYXRlQ3JlYXRlZD0iMjAyMy0wNy0wM1QxMzo1Mjo0Mi0wNjAwIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIyMCIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjIwIgogICBleGlmOkNvbG9yU3BhY2U9IjEiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMjAiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjIwIgogICB0aWZmOlJlc29sdXRpb25Vbml0PSIyIgogICB0aWZmOlhSZXNvbHV0aW9uPSI3Mi8xIgogICB0aWZmOllSZXNvbHV0aW9uPSI3Mi8xIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0icHJvZHVjZWQiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFmZmluaXR5IFBob3RvIDIgMi4xLjEiCiAgICAgIHN0RXZ0OndoZW49IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0iciI/PsqWhVcAAAGBaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRuUtDQRCHvyRKxIMIEbGwCKJWRmKUoI1FgheoRRLBq0leLiHH470ECbaCraAg2ngV+hdoK1gLgqIIYqu1oo2G57xEiIiZZXa+/e3OsDsL1nBayeh1Hshk81pwwu+aX1h02Z+xY8PJEO0RRVdnQuNhatrHHRYz3rjNWrXP/WtNsbiugKVBeFRRtbzwpPD0al41eVu4TUlFYsKnwn2aXFD41tSjFX4xOVnhL5O1cDAA1lZhV/IXR3+xktIywvJyujPpgvJzH/MlzfHsXEhil3gnOkEm8ONiijEC+BhgRGYfbrz0y4oa+Z5y/iw5yVVkVimisUKSFHn6RC1I9bjEhOhxGWmKZv//9lVPDHor1Zv9UP9kGG89YN+C0qZhfB4aRukIbI9wka3m5w5g+F30zarWvQ+OdTi7rGrRHTjfgI4HNaJFypJN3JpIwOsJtCyA8xoalyo9+9nn+B7Ca/JVV7C7B71y3rH8DXjLZ+43iMieAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7ElEQVQ4je3VP0oDQRTH8U/GbOclFgzG0pTxMh5DLC1i4SX0MFoImlaJkDto6bKxeLO4CZJN1lJ/MMzA8H7z3vz5zsC6SpzhCMl21XjDPZabkwWuUWG1Z6tybAHDbHiFC3zgFnN8dmRY4BTnOXaFy6bMCu847jD5SeOcSIUyiT07yJm99jB8wV32mCZxAESZffWU+1HyfZpde7ZNTWzquhp769/wrxjWeVz8wqeJrZNAEPHQ+2qS+wXrcBj3MDvRgsNQwPFGIOhRPPRnu+FrIvB1KJi4bE/O9AfsLHsYbKxaYoqR3b6ABR7amX0BUYVIcK45KfQAAAAASUVORK5CYII=";  select_square.alt="box";  select_square.classList.add("alignMiddleImg");  select_square.classList.add("nocheck");  if (character.poses[selectedPose].default_outfit==i.path) {  select_square.src= "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDctMDNUMTM6NTI6NDItMDYwMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDctMDNUMTQ6MTE6NDAtMDY6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDctMDNUMTQ6MTE6NDAtMDY6MDAiCiAgIHBob3Rvc2hvcDpEYXRlQ3JlYXRlZD0iMjAyMy0wNy0wM1QxMzo1Mjo0Mi0wNjAwIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIyMCIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjIwIgogICBleGlmOkNvbG9yU3BhY2U9IjEiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMjAiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjIwIgogICB0aWZmOlJlc29sdXRpb25Vbml0PSIyIgogICB0aWZmOlhSZXNvbHV0aW9uPSI3Mi8xIgogICB0aWZmOllSZXNvbHV0aW9uPSI3Mi8xIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0icHJvZHVjZWQiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFmZmluaXR5IFBob3RvIDIgMi4xLjEiCiAgICAgIHN0RXZ0OndoZW49IjIwMjMtMDctMDNUMTQ6MTE6NDAtMDY6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0iciI/PohIZ3IAAAGBaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRuUtDQRCHvyRKxIMIEbGwCKJWRmKUoI1FgheoRRLBq0leLiHH470ECbaCraAg2ngV+hdoK1gLgqIIYqu1oo2G57xEiIiZZXa+/e3OsDsL1nBayeh1Hshk81pwwu+aX1h02Z+xY8PJEO0RRVdnQuNhatrHHRYz3rjNWrXP/WtNsbiugKVBeFRRtbzwpPD0al41eVu4TUlFYsKnwn2aXFD41tSjFX4xOVnhL5O1cDAA1lZhV/IXR3+xktIywvJyujPpgvJzH/MlzfHsXEhil3gnOkEm8ONiijEC+BhgRGYfbrz0y4oa+Z5y/iw5yVVkVimisUKSFHn6RC1I9bjEhOhxGWmKZv//9lVPDHor1Zv9UP9kGG89YN+C0qZhfB4aRukIbI9wka3m5w5g+F30zarWvQ+OdTi7rGrRHTjfgI4HNaJFypJN3JpIwOsJtCyA8xoalyo9+9nn+B7Ca/JVV7C7B71y3rH8DXjLZ+43iMieAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAklEQVQ4je3VQUrDQBTG8V9jsvMSAYt1aXfWE3gL915AdCdYFx5CPYUn0IKgrqVCriC6NKQuZoJtkCatS/1gmAzD++fNm5lvehaVYx9bSCxXhVfcoWhOZrhAidmKrYyxGaQReIZjfOAaz/hsyTDDLg5j7Awn9TJLvGO7BfKTBjGREnkq1GwjZvYSxwcdYbdCDW9whFEqbABhmbCH047Atwh8jON+4ns322q2THVs0nY0VtY/8K8Aq/id/YJTx1apYEGEi36FCc47giaxH8Z+yqI5DNbIbkfDHApcChb0IFz0J93sayjY16bgicX85Nj6BjuODL3GX3OM0NftCZjifj6zL9t8TyFzA/CyAAAAAElFTkSuQmCC";  outfitDiv.classList.add("tableSelected");  select_square.classList.replace("nocheck", "check");  outfitDiv.title="";  }  outfitDiv.append(select_square);  outfitDiv.append(outfitSpan);  namesDiv.append(outfitDiv);  }  if (character.poses[selectedPose].accessory_names.length > 0) {  accessHeader=document.createElement("span");  accessHeader.classList.add("elementHeaderLineAccessories");  accessHeader.textContent="Accessories";  accessHeader.title="Add or remove accessories";  namesDiv.append(accessHeader);  for (var i of character.poses[selectedPose].accessory_names) {  accDiv=document.createElement("div");  access=document.createElement("span");  accDiv.classList.add("elementTableLine");  accDiv.classList.add("accessoryLine");  access.textContent=properAccessoryName(i);  accDiv.title="Add " + access.textContent;  access.name=access.textContent;  access.classList.add("alignMiddle");  accDiv.setAttribute("accessoryName", i.name);  accDiv.setAttribute("accessoryState", i.state);  accDiv.onclick=function () {  manipulateAccessories(this);  };  select_square=document.createElement("img");  select_square.src= "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAFEmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS41LjAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDctMDNUMTM6NTI6NDItMDYwMCIKICAgeG1wOk1vZGlmeURhdGU9IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiCiAgIHhtcDpNZXRhZGF0YURhdGU9IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiCiAgIHBob3Rvc2hvcDpEYXRlQ3JlYXRlZD0iMjAyMy0wNy0wM1QxMzo1Mjo0Mi0wNjAwIgogICBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIgogICBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiCiAgIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIyMCIKICAgZXhpZjpQaXhlbFlEaW1lbnNpb249IjIwIgogICBleGlmOkNvbG9yU3BhY2U9IjEiCiAgIHRpZmY6SW1hZ2VXaWR0aD0iMjAiCiAgIHRpZmY6SW1hZ2VMZW5ndGg9IjIwIgogICB0aWZmOlJlc29sdXRpb25Vbml0PSIyIgogICB0aWZmOlhSZXNvbHV0aW9uPSI3Mi8xIgogICB0aWZmOllSZXNvbHV0aW9uPSI3Mi8xIj4KICAgPHhtcE1NOkhpc3Rvcnk+CiAgICA8cmRmOlNlcT4KICAgICA8cmRmOmxpCiAgICAgIHN0RXZ0OmFjdGlvbj0icHJvZHVjZWQiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFmZmluaXR5IFBob3RvIDIgMi4xLjEiCiAgICAgIHN0RXZ0OndoZW49IjIwMjMtMDctMDNUMTM6NTU6MzgtMDY6MDAiLz4KICAgIDwvcmRmOlNlcT4KICAgPC94bXBNTTpIaXN0b3J5PgogIDwvcmRmOkRlc2NyaXB0aW9uPgogPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KPD94cGFja2V0IGVuZD0iciI/PsqWhVcAAAGBaUNDUHNSR0IgSUVDNjE5NjYtMi4xAAAokXWRuUtDQRCHvyRKxIMIEbGwCKJWRmKUoI1FgheoRRLBq0leLiHH470ECbaCraAg2ngV+hdoK1gLgqIIYqu1oo2G57xEiIiZZXa+/e3OsDsL1nBayeh1Hshk81pwwu+aX1h02Z+xY8PJEO0RRVdnQuNhatrHHRYz3rjNWrXP/WtNsbiugKVBeFRRtbzwpPD0al41eVu4TUlFYsKnwn2aXFD41tSjFX4xOVnhL5O1cDAA1lZhV/IXR3+xktIywvJyujPpgvJzH/MlzfHsXEhil3gnOkEm8ONiijEC+BhgRGYfbrz0y4oa+Z5y/iw5yVVkVimisUKSFHn6RC1I9bjEhOhxGWmKZv//9lVPDHor1Zv9UP9kGG89YN+C0qZhfB4aRukIbI9wka3m5w5g+F30zarWvQ+OdTi7rGrRHTjfgI4HNaJFypJN3JpIwOsJtCyA8xoalyo9+9nn+B7Ca/JVV7C7B71y3rH8DXjLZ+43iMieAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7ElEQVQ4je3VP0oDQRTH8U/GbOclFgzG0pTxMh5DLC1i4SX0MFoImlaJkDto6bKxeLO4CZJN1lJ/MMzA8H7z3vz5zsC6SpzhCMl21XjDPZabkwWuUWG1Z6tybAHDbHiFC3zgFnN8dmRY4BTnOXaFy6bMCu847jD5SeOcSIUyiT07yJm99jB8wV32mCZxAESZffWU+1HyfZpde7ZNTWzquhp769/wrxjWeVz8wqeJrZNAEPHQ+2qS+wXrcBj3MDvRgsNQwPFGIOhRPPRnu+FrIvB1KJi4bE/O9AfsLHsYbKxaYoqR3b6ABR7amX0BUYVIcK45KfQAAAAASUVORK5CYII=";  select_square.alt="box";  select_square.classList.add("alignMiddleImg");  select_square.classList.add("nocheck");  accDiv.append(select_square);  accDiv.append(access);  namesDiv.append(accDiv);  }  }  document.querySelector("#accessoryBuilder").append(namesDiv);  setupAccessoryView();  const skip_num=default_outfit.length;  layerinOrder=default_outfit.concat(character.poses[selectedPose].faces);  var left_crop=character.poses[selectedPose].default_left_crop;  var right_crop=character.poses[selectedPose].default_right_crop;  var top_crop=character.poses[selectedPose].default_top_crop;  var nheight=parseInt(character.poses[selectedPose].max_face_height - top_crop + rect_height);  var nwidth=right_crop - left_crop;  var face_name_fill=RGBAtoRGB(  window.getComputedStyle(document.body, null).getPropertyValue("background-color")  );  loadImages(layerinOrder, function (images) {  for (const [index, element] of enumerate(layerinOrder)) {  if (index < skip_num) {  continue;  }  txt_str=selectedPose + "_" + element.split("/").pop().split(".")[0].replace("%23", "#");  newCanvas=document.createElement("canvas");  newCanvas.id=txt_str;  newCanvas.title="Copy the Renpy command to show face " + txt_str;  newCanvas.height=nheight + image_padding;  newCanvas.width=nwidth;  newCanvas.classList.add("faceCanvas");  newCanvas.addEventListener("click", function (evt) {  outputFaceCopyString(this.id);  });  context=newCanvas.getContext("2d");  document.querySelector("#imageList2").append(newCanvas);  if (index % 2==1) {  context.fillStyle="Black"; /*Color1 replace*/  } else {  context.fillStyle="#121212"; /*Color2 replace*/  }  context.fillRect(0, 0, nwidth, nheight + image_padding);  for (var i=0; i < skip_num; i++) {  context.drawImage(images[i], left_crop, top_crop, nwidth, nheight, 0, 0, nwidth, nheight);  }  context.drawImage(images[index], left_crop, top_crop, nwidth, nheight, 0, 0, nwidth, nheight);  context.font="24pt Calibri";  context.fillStyle=face_name_fill;  /*rect color*/ context.fillRect(  0,  0 + nheight - rect_height,  nwidth,  rect_height + image_padding  );  context.fillStyle="Black";  /*text color*/ context.fillText(  txt_str,  (nwidth - getTextWidth(txt_str, context.font)) / 2 + 0,  0 + nheight - (rect_height - image_padding) / 2 / 2  );  }  });  document.title=scenario + " " + selectedCharacter + "_" + selectedPose;  hideDiv.setAttribute("currentHeight", hideDiv.scrollHeight + "px");  hideDiv.style.maxHeight=hideDiv.scrollHeight + "px";  if (show_outfits) {  hideDiv.style.maxHeight="0px";  hideDiv.classList.add("hidden");  hideDiv.classList.remove("unhidden");  document.querySelector("#changeArrow").classList.remove("rotateUp");  document.querySelector("#changeArrow").classList.add("rotateDownNoAnimation");  document.querySelector("#changeArrow").title="Show accessories and Outfits";  outfitsSelect.classList.add("disallowHover");  accessorySelect.classList.add("disallowHover");  } else {  document.querySelector("#changeArrow").title="Hide accessories and Outfits";  }  window.addEventListener("resize", (event) => {  calculateImageListMaxHeight();  });  window.addEventListener("load", (event) => {  calculateImageListMaxHeight();  });  swapHideDivDisplay(outfits_or_accessories, true);  outfitsSelect.onclick=function () {  swapHideDivDisplay("0");  };  accessorySelect.onclick=function () {  swapHideDivDisplay("1");  };  }  document.querySelector("body").addEventListener("keydown", (event) => {  var char_index;  var replaceUrl;  if (event.key=="Backspace") {  history.back();  } else if (event.code=="Backslash") {  disable_keys=!disable_keys;  sessionStorage.setItem("disable_keys", disable_keys);  document.getAnimations().forEach((animation) => {  animation.cancel();  });  document.querySelector("#ToggleText").textContent=disable_keys  ? "Keyboard shortcuts are disabled."  : "Keyboard shortcuts are enabled.";  setTimeout(function () {  document.querySelector("#ToggleText").classList.add("fade");  }, 6.25);  document.querySelector("#ToggleText").classList.remove("fade");  } else if (event.code=="Enter" && selectedCharacter==undefined) {  old_outfit_filter=outfit_filter ? 1 : 0;  old_outfit_word=outfit_filter ? "On" : "Off";  outfit_filter=!outfit_filter;  new_outfit_filter=outfit_filter ? 1 : 0;  new_outfit_word=outfit_filter ? "On" : "Off";  newURL.searchParams.set("outfitview", new_outfit_filter);  if (title.textContent==scenario) {  window.location.href=newURL.toString();  } else {  replaceUrl=new URL(window.location.href);  if (static_url_addons.includes("outfitview")) {  static_url_addons=static_url_addons.replace(  "outfitview=" + old_outfit_filter,  "outfitview=" + new_outfit_filter  );  } else {  static_url_addons=static_url_addons + "&outfitview=" + new_outfit_filter;  }  o_help=document.getElementById("OutfitHelp");  o_help.textContent=o_help.textContent.replace(  "Current status: " + old_outfit_word,  "Current status: " + new_outfit_word  );  replaceUrl.searchParams.set("outfitview", new_outfit_filter);  window.history.replaceState(scenario, scenario, replaceUrl.toString());  }  } else if (disable_keys) {  } else if (event.code=="KeyA" && selectedCharacter != undefined) {  swapHideDivDisplay();  } else if (event.code=="KeyB" && selectedCharacter != undefined) {  makeNewBody();  } else if (event.code=="KeyR" && selectedCharacter != undefined) {  makeNewBody(selectedCharacter, true);  } else if (event.code=="KeyH" && selectedCharacter != undefined) {  manipImageList();  } else if (event.key=="ArrowUp" && selectedCharacter != undefined) {  window.location.href=homeURL.toString();  } else if (event.key=="ArrowRight") {  switchCharactersAdd();  } else if (event.key=="ArrowLeft") {  switchCharactersMinus();  } else if (event.code=="Minus" && selectedCharacter==undefined) {  old_pose_filter=pose_filter;  pose_filter=pose_filter - 1 < 1 ? 1 : pose_filter - 1;  newURL.searchParams.set("pcount", pose_filter);  if (old_pose_filter==pose_filter) {  return;  } else if (title.textContent==scenario) {  window.location.href=newURL.toString();  } else {  replaceUrl=new URL(window.location.href);  if (static_url_addons.includes("pcount")) {  static_url_addons=static_url_addons.replace(  "pcount=" + old_pose_filter,  "pcount=" + pose_filter  );  } else {  static_url_addons=static_url_addons + "&pcount=" + pose_filter;  }  if (pose_filter != old_pose_filter) {  p_help=document.getElementById("PoseHelp");  p_help.textContent=p_help.textContent.replace(">=" + old_pose_filter, ">=" + pose_filter);  }  replaceUrl.searchParams.set("pcount", pose_filter);  window.history.replaceState(scenario, scenario, replaceUrl.toString());  }  } else if (event.code=="Equal" && selectedCharacter==undefined) {  old_pose_filter=pose_filter;  pose_filter=pose_filter + 1 > max_poses ? max_poses : pose_filter + 1;  newURL.searchParams.set("pcount", pose_filter);  if (old_pose_filter==pose_filter) {  return;  } else if (title.textContent==scenario) {  window.location.href=newURL.toString();  } else {  replaceUrl=new URL(window.location.href);  if (static_url_addons.includes("pcount")) {  static_url_addons=static_url_addons.replace(  "pcount=" + old_pose_filter,  "pcount=" + pose_filter  );  } else {  static_url_addons=static_url_addons + "&pcount=" + pose_filter;  }  if (pose_filter != old_pose_filter) {  p_help=document.getElementById("PoseHelp");  p_help.textContent=p_help.textContent.replace(">=" + old_pose_filter, ">=" + pose_filter);  }  replaceUrl.searchParams.set("pcount", pose_filter);  window.history.replaceState(scenario, scenario, replaceUrl.toString());  }  }  });  </script>  </body>  </html> 