<!DOCTYPE html><html> <head> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/> <title>Class Swap</title> <script src="https://code.jquery.com/jquery-3.5.1.slim.js"></script> <script src="https://code.jquery.com/jquery-3.5.0.js"></script> <style>body{text-align: center;}#canvas{padding-top: 10px;}.characters{display: flex; flex-wrap: wrap; justify-content: center; /* here we just put the only child div to the center */}.character{margin: 10px 10px 0 0; padding: 0px 0px; height: 238px; display: flex; flex-wrap: nowrap; justify-content: center; /* here we just put the only child div to the center */ border-radius: 0.5px; border-color: grey; border-style: solid; position: relative;}.character2{margin: 10px 10px 0 0; padding: 0px 0px; height: 220px; display: flex; flex-wrap: nowrap; justify-content: center; /* here we just put the only child div to the center */ border-radius: 0.5px; border-color: grey; border-style: solid; position: relative;}.character2Container{display: flex; flex-wrap: wrap; justify-content: center; /* here we just put the only child div to the center */}.character span{position: absolute; background-color: grey; color: white; width: 100%;}.character2 span{position: absolute; background-color: grey; color: white; width: 100%;}.characterImagesOutfit{height: 200px; position: relative; top: 20px; left: 0px;}.characterposename{position: absolute; left: 50%; top: 100%; transform: translate(-50%, 0%); z-index: 31; background-color: grey; color: white; margin-top: 16px; width: 100%;}#ToggleText{/*Stolen From W3*/ width: 160px; position: fixed; top: 10px; right: 12px; font-size: 24px; display: none;}.popup{background-color: #555; color: #fff; text-align: center; border-radius: 6px; padding: 8px 0; margin-left: -80px; z-index: 1;}#HelpText{position: absolute; top: 7%; width: 450px; padding: 10px 15px; padding-bottom: 15px; margin-left: auto; margin-right: auto; left: 0; right: 0; visibility: hidden;}#HelpTitle{font-size: 24px; display: block;}.HelpLine{display: block;}</style> </head> <body> <span id="ToggleText" class="popup"></span> <span id="HelpText" class="popup" ><span id="HelpTitle">Character Viewer Shortcuts</span> <br/><span class="HelpLine" >Pipe | BackSlash: Disable and enable these shortcuts</span> <br/><span class="HelpLine" >UpArrow: Return to this page from any page</span> <br/><span class="HelpLine" >Backspace: Return to previous page</span> <br/><span class="HelpLine" >Left/Right Arrow: Navigate through characters in alphabetical order</span> </span> <div> <h1 id="title" onmouseover="popouthelp()" onmouseout="hidehelp()" ></h1> </div><div id="imageList" class="characters"></div><div id="imageList2"></div></body> <script type="text/javascript">function popouthelp(){var popup=document.getElementById("HelpText"); popup.style.visibility="visible";}function hidehelp(){var popup=document.getElementById("HelpText"); popup.style.visibility="hidden";}function parseTextBool(textToParse){return textToParse=="true" ? true : false;}function getTextWidth(text, font){const canvas=getTextWidth.canvas || (getTextWidth.canvas=document.createElement("canvas")); const context=canvas.getContext("2d"); context.font=font; const metrics=context.measureText(text); return metrics.width;}function loadImages(sources, callback){var images={}; var loadedImages=0; var numImages=0; for (var src in sources){numImages++;}for (var src in sources){images[src]=new Image(); images[src].onload=function (){if (++loadedImages >=numImages){callback(images);}}; images[src].src=sources[src];}}function makeCharURL(namepose){var splitted=namepose.toString().split(","); return "character=" + splitted[0] + "&pose=" + splitted[1];}var disable_keys=parseTextBool( sessionStorage.getItem("disable_keys") ); if (disable_keys==false){sessionStorage.setItem("disable_keys", false); disable_keys=false;}$("#ToggleText").text( disable_keys ? "Keyboard shortcuts are disabled." : "Keyboard shortcuts are enabled." ); var scenario="Class Swap"; var testArray=[['brenda', 'a'], ['brenda', 'b'], ['erica', 'a'], ['erica', 'b'], ['erica', 'c'], ['iroha', 'a'], ['iroha', 'b'], ['izuna', 'a'], ['izuna', 'aears'], ['izuna', 'b'], ['izuna', 'bears'], ['izuna', 'sword'], ['marin', 'a'], ['marin', 'b'], ['marin', 'c'], ['phila', 'a'], ['phila', 'b'], ['sadie', 'a'], ['tori', 'a'], ['tori', 'b']]; var jsonData={ "brenda": {"name": "brenda", "poses" :{"a" : {"max_face_height": 244, "faces": ['characters/brenda/a/faces/face/0.webp', 'characters/brenda/a/faces/face/1.webp', 'characters/brenda/a/faces/face/2.webp', 'characters/brenda/a/faces/face/3.webp', 'characters/brenda/a/faces/face/4.webp', 'characters/brenda/a/faces/face/5.webp', 'characters/brenda/a/faces/face/6.webp', 'characters/brenda/a/faces/face/7.webp'], "default_outfit" : "characters/brenda/a/outfits/uniform.webp", "default_accessories" : [   ], "default_left_crop" : 166, "default_right_crop" : 389,"default_top_crop" : 54, "outfits": ["characters/brenda/a/outfits/dress.webp", "characters/brenda/a/outfits/gothloli.webp", "characters/brenda/a/outfits/suit.webp", "characters/brenda/a/outfits/uniform.webp"]}, "b" : {"max_face_height": 253, "faces": ['characters/brenda/b/faces/face/0.webp', 'characters/brenda/b/faces/face/1.webp', 'characters/brenda/b/faces/face/2.webp', 'characters/brenda/b/faces/face/3.webp', 'characters/brenda/b/faces/face/4.webp', 'characters/brenda/b/faces/face/5.webp', 'characters/brenda/b/faces/face/6.webp'], "default_outfit" : "characters/brenda/b/outfits/uniform.webp", "default_accessories" : [   ], "default_left_crop" : 183, "default_right_crop" : 439,"default_top_crop" : 62, "outfits": ["characters/brenda/b/outfits/dress.webp", "characters/brenda/b/outfits/gothloli.webp", "characters/brenda/b/outfits/suit.webp", "characters/brenda/b/outfits/uniform.webp"]}, }},"erica": {"name": "erica", "poses" :{"a" : {"max_face_height": 235, "faces": ['characters/erica/a/faces/face/0.webp', 'characters/erica/a/faces/face/1.webp', 'characters/erica/a/faces/face/2.webp', 'characters/erica/a/faces/face/3.webp', 'characters/erica/a/faces/face/4.webp', 'characters/erica/a/faces/face/5.webp', 'characters/erica/a/faces/face/6.webp', 'characters/erica/a/faces/face/7.webp', 'characters/erica/a/faces/face/8.webp', 'characters/erica/a/faces/face/9.webp', 'characters/erica/a/faces/face/10.webp', 'characters/erica/a/faces/face/11.webp', 'characters/erica/a/faces/face/12.webp', 'characters/erica/a/faces/face/13.webp', 'characters/erica/a/faces/face/14.webp', 'characters/erica/a/faces/face/15.webp', 'characters/erica/a/faces/face/16.webp', 'characters/erica/a/faces/face/17.webp', 'characters/erica/a/faces/face/18.webp', 'characters/erica/a/faces/face/19.webp', 'characters/erica/a/faces/face/20.webp', 'characters/erica/a/faces/face/21.webp', 'characters/erica/a/faces/face/22.webp', 'characters/erica/a/faces/face/23.webp', 'characters/erica/a/faces/face/24.webp', 'characters/erica/a/faces/face/25.webp', 'characters/erica/a/faces/face/26.webp', 'characters/erica/a/faces/face/27.webp'], "default_outfit" : "characters/erica/a/outfits/uniform/uniform.png", "default_accessories" : [   ], "default_left_crop" : 100, "default_right_crop" : 329,"default_top_crop" : 0, "outfits": ["characters/erica/a/outfits/casual/casual.webp", "characters/erica/a/outfits/gown/gown.webp", "characters/erica/a/outfits/kimono/kimono.webp", "characters/erica/a/outfits/traditional/traditional.webp", "characters/erica/a/outfits/uniform/uniform.png", "characters/erica/a/outfits/uniform_b/uniform_b.png", "characters/erica/a/outfits/uniform_c/uniform_c.webp"]}, "b" : {"max_face_height": 228, "faces": ['characters/erica/b/faces/face/0.webp', 'characters/erica/b/faces/face/1.webp', 'characters/erica/b/faces/face/2.webp', 'characters/erica/b/faces/face/3.webp', 'characters/erica/b/faces/face/4.webp', 'characters/erica/b/faces/face/5.webp', 'characters/erica/b/faces/face/6.webp', 'characters/erica/b/faces/face/7.webp', 'characters/erica/b/faces/face/8.webp', 'characters/erica/b/faces/face/9.webp', 'characters/erica/b/faces/face/10.webp', 'characters/erica/b/faces/face/11.webp', 'characters/erica/b/faces/face/12.webp', 'characters/erica/b/faces/face/13.webp', 'characters/erica/b/faces/face/14.webp', 'characters/erica/b/faces/face/15.webp', 'characters/erica/b/faces/face/16.webp', 'characters/erica/b/faces/face/17.webp', 'characters/erica/b/faces/face/18.webp', 'characters/erica/b/faces/face/19.webp', 'characters/erica/b/faces/face/20.webp', 'characters/erica/b/faces/face/21.webp', 'characters/erica/b/faces/face/22.webp', 'characters/erica/b/faces/face/23.webp', 'characters/erica/b/faces/face/24.webp', 'characters/erica/b/faces/face/25.webp', 'characters/erica/b/faces/face/26.webp', 'characters/erica/b/faces/face/27.webp'], "default_outfit" : "characters/erica/b/outfits/uniform.png", "default_accessories" : [   ], "default_left_crop" : 71, "default_right_crop" : 326,"default_top_crop" : 0, "outfits": ["characters/erica/b/outfits/casual.webp", "characters/erica/b/outfits/gown.webp", "characters/erica/b/outfits/kimono.webp", "characters/erica/b/outfits/traditional.webp", "characters/erica/b/outfits/uniform.png", "characters/erica/b/outfits/uniform_b.png", "characters/erica/b/outfits/uniform_c.webp"]}, "c" : {"max_face_height": 225, "faces": ['characters/erica/c/faces/face/0.webp', 'characters/erica/c/faces/face/1.webp', 'characters/erica/c/faces/face/2.webp', 'characters/erica/c/faces/face/3.webp', 'characters/erica/c/faces/face/4.webp', 'characters/erica/c/faces/face/5.webp', 'characters/erica/c/faces/face/6.webp', 'characters/erica/c/faces/face/7.webp', 'characters/erica/c/faces/face/8.webp', 'characters/erica/c/faces/face/9.webp', 'characters/erica/c/faces/face/10.webp', 'characters/erica/c/faces/face/11.webp', 'characters/erica/c/faces/face/12.webp', 'characters/erica/c/faces/face/13.webp', 'characters/erica/c/faces/face/14.webp', 'characters/erica/c/faces/face/15.webp', 'characters/erica/c/faces/face/16.webp', 'characters/erica/c/faces/face/17.webp', 'characters/erica/c/faces/face/18.webp', 'characters/erica/c/faces/face/19.webp', 'characters/erica/c/faces/face/20.webp', 'characters/erica/c/faces/face/21.webp', 'characters/erica/c/faces/face/22.webp', 'characters/erica/c/faces/face/23.webp', 'characters/erica/c/faces/face/24.webp', 'characters/erica/c/faces/face/25.webp', 'characters/erica/c/faces/face/26.webp', 'characters/erica/c/faces/face/27.webp'], "default_outfit" : "characters/erica/c/outfits/casual.webp", "default_accessories" : [   ], "default_left_crop" : 140, "default_right_crop" : 431,"default_top_crop" : 6, "outfits": ["characters/erica/c/outfits/casual.webp", "characters/erica/c/outfits/gown.webp", "characters/erica/c/outfits/kimono.webp", "characters/erica/c/outfits/traditional.webp", "characters/erica/c/outfits/uniform_c.webp"]}, }},"iroha": {"name": "iroha", "poses" :{"a" : {"max_face_height": 198, "faces": ['characters/iroha/a/faces/face/0.webp', 'characters/iroha/a/faces/face/1.webp', 'characters/iroha/a/faces/face/2.webp', 'characters/iroha/a/faces/face/3.webp', 'characters/iroha/a/faces/face/4.webp', 'characters/iroha/a/faces/face/5.webp', 'characters/iroha/a/faces/face/6.webp', 'characters/iroha/a/faces/face/7.webp'], "default_outfit" : "characters/iroha/a/outfits/uniform.webp", "default_accessories" : [   ], "default_left_crop" : 105, "default_right_crop" : 327,"default_top_crop" : 31, "outfits": ["characters/iroha/a/outfits/casual.webp", "characters/iroha/a/outfits/maid.webp", "characters/iroha/a/outfits/uniform.webp", "characters/iroha/a/outfits/uniform_b.png"]}, "b" : {"max_face_height": 201, "faces": ['characters/iroha/b/faces/face/0.webp', 'characters/iroha/b/faces/face/1.webp', 'characters/iroha/b/faces/face/2.webp', 'characters/iroha/b/faces/face/3.webp', 'characters/iroha/b/faces/face/4.webp', 'characters/iroha/b/faces/face/5.webp', 'characters/iroha/b/faces/face/6.webp', 'characters/iroha/b/faces/face/7.webp'], "default_outfit" : "characters/iroha/b/outfits/uniform.webp", "default_accessories" : [   ], "default_left_crop" : 182, "default_right_crop" : 407,"default_top_crop" : 28, "outfits": ["characters/iroha/b/outfits/casual.webp", "characters/iroha/b/outfits/maid.webp", "characters/iroha/b/outfits/uniform.webp", "characters/iroha/b/outfits/uniform_b.png"]}, }},"izuna": {"name": "izuna", "poses" :{"a" : {"max_face_height": 206, "faces": ['characters/izuna/a/faces/face/0.png', 'characters/izuna/a/faces/face/1.png', 'characters/izuna/a/faces/face/2.png', 'characters/izuna/a/faces/face/3.png', 'characters/izuna/a/faces/face/4.png', 'characters/izuna/a/faces/face/5.png', 'characters/izuna/a/faces/face/6.png', 'characters/izuna/a/faces/face/7.png', 'characters/izuna/a/faces/face/8.png'], "default_outfit" : "characters/izuna/a/outfits/uniform.webp", "default_accessories" : [   ], "default_left_crop" : 222, "default_right_crop" : 482,"default_top_crop" : 26, "outfits": ["characters/izuna/a/outfits/casual.webp", "characters/izuna/a/outfits/casualb.webp", "characters/izuna/a/outfits/casualbb.webp", "characters/izuna/a/outfits/gym.webp", "characters/izuna/a/outfits/uniform.webp", "characters/izuna/a/outfits/uniforms.webp", "characters/izuna/a/outfits/uniformsnoband.webp"]}, "aears" : {"max_face_height": 206, "faces": ['characters/izuna/aears/faces/face/0.png', 'characters/izuna/aears/faces/face/1.png', 'characters/izuna/aears/faces/face/2.png', 'characters/izuna/aears/faces/face/3.png', 'characters/izuna/aears/faces/face/4.png', 'characters/izuna/aears/faces/face/5.png', 'characters/izuna/aears/faces/face/6.png', 'characters/izuna/aears/faces/face/7.png', 'characters/izuna/aears/faces/face/8.png'], "default_outfit" : "characters/izuna/aears/outfits/casualb.webp", "default_accessories" : [   ], "default_left_crop" : 210, "default_right_crop" : 483,"default_top_crop" : 15, "outfits": ["characters/izuna/aears/outfits/casualb.webp", "characters/izuna/aears/outfits/casualbb.webp"]}, "b" : {"max_face_height": 197, "faces": ['characters/izuna/b/faces/face/0.webp', 'characters/izuna/b/faces/face/1.webp', 'characters/izuna/b/faces/face/2.webp', 'characters/izuna/b/faces/face/3.webp', 'characters/izuna/b/faces/face/4.webp', 'characters/izuna/b/faces/face/5.webp'], "default_outfit" : "characters/izuna/b/outfits/uniform.webp", "default_accessories" : [   ], "default_left_crop" : 204, "default_right_crop" : 461,"default_top_crop" : 14, "outfits": ["characters/izuna/b/outfits/casual.webp", "characters/izuna/b/outfits/casualb.webp", "characters/izuna/b/outfits/uniform.webp"]}, "bears" : {"max_face_height": 197, "faces": ['characters/izuna/bears/faces/face/0.webp', 'characters/izuna/bears/faces/face/1.webp', 'characters/izuna/bears/faces/face/2.webp', 'characters/izuna/bears/faces/face/3.webp', 'characters/izuna/bears/faces/face/4.webp', 'characters/izuna/bears/faces/face/5.webp'], "default_outfit" : "characters/izuna/bears/outfits/casualb.webp", "default_accessories" : [   ], "default_left_crop" : 204, "default_right_crop" : 461,"default_top_crop" : 14, "outfits": ["characters/izuna/bears/outfits/casualb.webp"]}, "sword" : {"max_face_height": 206, "faces": ['characters/izuna/sword/faces/face/0.webp', 'characters/izuna/sword/faces/face/1.webp', 'characters/izuna/sword/faces/face/2.webp', 'characters/izuna/sword/faces/face/3.webp', 'characters/izuna/sword/faces/face/4.webp', 'characters/izuna/sword/faces/face/5.webp'], "default_outfit" : "characters/izuna/sword/outfits/uniform.webp", "default_accessories" : [   ], "default_left_crop" : 210, "default_right_crop" : 483,"default_top_crop" : 15, "outfits": ["characters/izuna/sword/outfits/uniform.webp"]}, }},"marin": {"name": "marin", "poses" :{"a" : {"max_face_height": 427, "faces": ['characters/marin/a/faces/face/0.png', 'characters/marin/a/faces/face/1.png', 'characters/marin/a/faces/face/2.png', 'characters/marin/a/faces/face/3.png', 'characters/marin/a/faces/face/4.png', 'characters/marin/a/faces/face/5.png', 'characters/marin/a/faces/face/6.png', 'characters/marin/a/faces/face/7.png', 'characters/marin/a/faces/face/8.png', 'characters/marin/a/faces/face/9.png', 'characters/marin/a/faces/face/10.png', 'characters/marin/a/faces/face/11.png', 'characters/marin/a/faces/face/12.png', 'characters/marin/a/faces/face/13.png', 'characters/marin/a/faces/face/14.png', 'characters/marin/a/faces/face/15.png', 'characters/marin/a/faces/face/16.png'], "default_outfit" : "characters/marin/a/outfits/casual.png", "default_accessories" : [   ], "default_left_crop" : 162, "default_right_crop" : 543,"default_top_crop" : 126, "outfits": ["characters/marin/a/outfits/bathrobe.png", "characters/marin/a/outfits/casual.png", "characters/marin/a/outfits/fashion.png", "characters/marin/a/outfits/magical.png", "characters/marin/a/outfits/pj.png", "characters/marin/a/outfits/swimsuit2.png"]}, "b" : {"max_face_height": 427, "faces": ['characters/marin/b/faces/face/0.png', 'characters/marin/b/faces/face/1.png', 'characters/marin/b/faces/face/2.png', 'characters/marin/b/faces/face/3.png', 'characters/marin/b/faces/face/4.png', 'characters/marin/b/faces/face/5.png', 'characters/marin/b/faces/face/6.png', 'characters/marin/b/faces/face/7.png', 'characters/marin/b/faces/face/8.png', 'characters/marin/b/faces/face/9.png', 'characters/marin/b/faces/face/10.png', 'characters/marin/b/faces/face/11.png', 'characters/marin/b/faces/face/12.png', 'characters/marin/b/faces/face/13.png', 'characters/marin/b/faces/face/14.png', 'characters/marin/b/faces/face/15.png', 'characters/marin/b/faces/face/16.png'], "default_outfit" : "characters/marin/b/outfits/casual.png", "default_accessories" : [   ], "default_left_crop" : 162, "default_right_crop" : 543,"default_top_crop" : 126, "outfits": ["characters/marin/b/outfits/casual.png", "characters/marin/b/outfits/fashion.png", "characters/marin/b/outfits/magical.png", "characters/marin/b/outfits/pj.png", "characters/marin/b/outfits/swimsuit2.png"]}, "c" : {"max_face_height": 427, "faces": ['characters/marin/c/faces/face/0.png', 'characters/marin/c/faces/face/1.png', 'characters/marin/c/faces/face/2.png', 'characters/marin/c/faces/face/3.png', 'characters/marin/c/faces/face/4.png', 'characters/marin/c/faces/face/5.png', 'characters/marin/c/faces/face/6.png', 'characters/marin/c/faces/face/7.png', 'characters/marin/c/faces/face/8.png', 'characters/marin/c/faces/face/9.png', 'characters/marin/c/faces/face/10.png', 'characters/marin/c/faces/face/11.png', 'characters/marin/c/faces/face/12.png', 'characters/marin/c/faces/face/13.png', 'characters/marin/c/faces/face/14.png', 'characters/marin/c/faces/face/15.png', 'characters/marin/c/faces/face/16.png'], "default_outfit" : "characters/marin/c/outfits/casual.png", "default_accessories" : [   ], "default_left_crop" : 162, "default_right_crop" : 543,"default_top_crop" : 126, "outfits": ["characters/marin/c/outfits/casual.png", "characters/marin/c/outfits/fashion.png", "characters/marin/c/outfits/magical.png", "characters/marin/c/outfits/pj.png", "characters/marin/c/outfits/swimsuit2.png"]}, }},"phila": {"name": "phila", "poses" :{"a" : {"max_face_height": 160, "faces": ['characters/phila/a/faces/face/0.png', 'characters/phila/a/faces/face/1.png', 'characters/phila/a/faces/face/2.png', 'characters/phila/a/faces/face/3.png', 'characters/phila/a/faces/face/4.png', 'characters/phila/a/faces/face/5.png', 'characters/phila/a/faces/face/6.png', 'characters/phila/a/faces/face/7.png', 'characters/phila/a/faces/face/8.png', 'characters/phila/a/faces/face/9.png'], "default_outfit" : "characters/phila/a/outfits/uniform.png", "default_accessories" : [   ], "default_left_crop" : 26, "default_right_crop" : 292,"default_top_crop" : 0, "outfits": ["characters/phila/a/outfits/dress.png", "characters/phila/a/outfits/swimsuit.png", "characters/phila/a/outfits/uniform.png"]}, "b" : {"max_face_height": 160, "faces": ['characters/phila/b/faces/face/0.png', 'characters/phila/b/faces/face/1.png', 'characters/phila/b/faces/face/2.png', 'characters/phila/b/faces/face/3.png', 'characters/phila/b/faces/face/4.png', 'characters/phila/b/faces/face/5.png', 'characters/phila/b/faces/face/6.png', 'characters/phila/b/faces/face/7.png', 'characters/phila/b/faces/face/8.png'], "default_outfit" : "characters/phila/b/outfits/uniform.png", "default_accessories" : [   ], "default_left_crop" : 91, "default_right_crop" : 306,"default_top_crop" : 5, "outfits": ["characters/phila/b/outfits/dress.png", "characters/phila/b/outfits/gym.png", "characters/phila/b/outfits/uniform.png"]}, }},"sadie": {"name": "sadie", "poses" :{"a" : {"max_face_height": 252, "faces": ['characters/sadie/a/faces/face/0.png', 'characters/sadie/a/faces/face/1.png', 'characters/sadie/a/faces/face/2.png', 'characters/sadie/a/faces/face/3.png', 'characters/sadie/a/faces/face/4.png', 'characters/sadie/a/faces/face/5.png', 'characters/sadie/a/faces/face/6.png', 'characters/sadie/a/faces/face/7.png', 'characters/sadie/a/faces/face/8.png', 'characters/sadie/a/faces/face/9.png', 'characters/sadie/a/faces/face/10.png', 'characters/sadie/a/faces/face/11.png', 'characters/sadie/a/faces/face/12.png', 'characters/sadie/a/faces/face/13.png', 'characters/sadie/a/faces/face/14.png', 'characters/sadie/a/faces/face/15.png', 'characters/sadie/a/faces/face/16.png', 'characters/sadie/a/faces/face/17.png', 'characters/sadie/a/faces/face/18.png', 'characters/sadie/a/faces/face/19.png', 'characters/sadie/a/faces/face/20.png', 'characters/sadie/a/faces/face/21.png', 'characters/sadie/a/faces/face/22.png', 'characters/sadie/a/faces/face/23.png', 'characters/sadie/a/faces/face/24.png', 'characters/sadie/a/faces/face/25.png', 'characters/sadie/a/faces/face/26.png', 'characters/sadie/a/faces/face/27.png', 'characters/sadie/a/faces/face/28.png', 'characters/sadie/a/faces/face/29.png', 'characters/sadie/a/faces/face/30.png', 'characters/sadie/a/faces/face/31.png', 'characters/sadie/a/faces/face/32.png'], "default_outfit" : "characters/sadie/a/outfits/uniform/uniform.webp", "default_accessories" : [ "characters/sadie/a/outfits/uniform/hairdown/off.webp",   ], "default_left_crop" : 66, "default_right_crop" : 428,"default_top_crop" : 21, "outfits": ["characters/sadie/a/outfits/casual/casual.webp", "characters/sadie/a/outfits/casual_b/casual_b.webp", "characters/sadie/a/outfits/cheer.webp", "characters/sadie/a/outfits/cheer_inverted.webp", "characters/sadie/a/outfits/cheer_madie.webp", "characters/sadie/a/outfits/cheer_madie_inverted.webp", "characters/sadie/a/outfits/sleepwear/sleepwear.webp", "characters/sadie/a/outfits/uniform/uniform.webp", "characters/sadie/a/outfits/uniform_madie/uniform_madie.webp"]}, }},"tori": {"name": "tori", "poses" :{"a" : {"max_face_height": 221, "faces": ['characters/tori/a/faces/face/0.png', 'characters/tori/a/faces/face/1.png', 'characters/tori/a/faces/face/2.png', 'characters/tori/a/faces/face/3.png', 'characters/tori/a/faces/face/4.png', 'characters/tori/a/faces/face/5.png', 'characters/tori/a/faces/face/6.png', 'characters/tori/a/faces/face/7.png', 'characters/tori/a/faces/face/8.png', 'characters/tori/a/faces/face/9.png', 'characters/tori/a/faces/face/10.png', 'characters/tori/a/faces/face/11.png', 'characters/tori/a/faces/face/12.png', 'characters/tori/a/faces/face/13.png', 'characters/tori/a/faces/face/14.png', 'characters/tori/a/faces/face/15.png'], "default_outfit" : "characters/tori/a/outfits/uniform.png", "default_accessories" : [   ], "default_left_crop" : 95, "default_right_crop" : 306,"default_top_crop" : 0, "outfits": ["characters/tori/a/outfits/casual.png", "characters/tori/a/outfits/fancy.png", "characters/tori/a/outfits/gym.png", "characters/tori/a/outfits/uniform.png"]}, "b" : {"max_face_height": 223, "faces": ['characters/tori/b/faces/face/0.png', 'characters/tori/b/faces/face/1.png', 'characters/tori/b/faces/face/2.png', 'characters/tori/b/faces/face/3.png', 'characters/tori/b/faces/face/4.png', 'characters/tori/b/faces/face/5.png', 'characters/tori/b/faces/face/6.png', 'characters/tori/b/faces/face/7.png', 'characters/tori/b/faces/face/8.png', 'characters/tori/b/faces/face/9.png', 'characters/tori/b/faces/face/10.png', 'characters/tori/b/faces/face/11.png', 'characters/tori/b/faces/face/12.png', 'characters/tori/b/faces/face/13.png'], "default_outfit" : "characters/tori/b/outfits/uniform.png", "default_accessories" : [   ], "default_left_crop" : 95, "default_right_crop" : 417,"default_top_crop" : 17, "outfits": ["characters/tori/b/outfits/casual.png", "characters/tori/b/outfits/formal.png", "characters/tori/b/outfits/swimsuit.png", "characters/tori/b/outfits/uniform.png"]}, }},};indexLen=testArray.length - 1; file_name=location.pathname.split("/").pop();function* enumerate(it, start=0){let i=start; for (const x of it) yield [i++, x];}const urlParams=new URLSearchParams(window.location.search); var urlIndex=urlParams.get("index"); if (urlIndex > indexLen || urlIndex < 0){window.location.replace(file_name);}var selectedPose=undefined; const selectedCharacter=urlParams.get("character") ? urlParams.get("character") : urlIndex ? testArray[urlIndex][0] : undefined; if ( selectedCharacter !=undefined && !(selectedCharacter in jsonData) ){selectedCharacter=undefined; window.history.pushState(scenario, scenario, file_name);}var head=document.getElementById("title"); var rect_height=24; if (selectedCharacter==undefined){title.textContent=scenario; Object.entries(jsonData).forEach(([character, characterData])=>{var html="<div class='character'><span>" + character + "</span>"; Object.entries(characterData.poses).forEach( ([pose, poseData])=>{var outfitPath=poseData.default_outfit; html +="<a href='" + file_name + "?character=" + character + "&pose=" + pose + "'><div style='position:relative;text-align:center'><img class='characterImagesOutfit' src='" + outfitPath + "'/><div class='characterposename'>" + pose + "</div></div></a>";}); html +="</div>"; $("#imageList").append(html); window.history.pushState(scenario, scenario, file_name);});}else{var character=jsonData[selectedCharacter]; selectedPose=urlParams.get("pose") || testArray[urlIndex][1]; if (!(selectedPose in character.poses)){window.location.replace(file_name);}title.textContent=selectedCharacter + "_" + selectedPose; var html="<div class='character2Container'><a href='" + file_name + "'><img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA4UlEQVR42mNgGAWjgAKQnZlZk5WV0TBwlmdm/AdjejsiKyMjB245vR0BtLwCaOFvNAd8z8pK9xgYn4McQ0fLR6LPszISsPj8c1ZWms1AWT6QPk9/P5A+pyrGV8Kl0NpyvA4ABvN6WluO1wENDQ0swGw3f8AcAAOZmRmzsWi8nZaWJkK3SgeHI+5nZGQo0K/my8zsxuaIrKwslYENiYyMx4MhJJ7npKeb0DEk0psxHZH+PictTYOeITF9wEMC1PxCdwQwdPrp2i4EWYiUIOeDCjC6t4zBIZGVMXlALB8FwwYAANeQ3GvAWTt8AAAAAElFTkSuQmCC' style='height: 25px;width: auto;padding-top: 10px;'></a>"; let outfits=Object.keys(character.poses[selectedPose].outfits); Object.entries(character.poses[selectedPose].outfits).forEach( ([index, outfit])=>{var outfitPath=outfit; var outfitName=outfit.split("/").pop(); html +="<div class='character2' style='min-width:" + (getTextWidth(outfitName, '16px "Times New Roman"') + 5) + "px;'><img class='characterImagesOutfit' src='" + outfitPath + "'/><span>" + outfit.split("/").pop() + "</span></div>";}); html +="</div>"; $("#imageList").append(html); html=""; var total_images=character["poses"][selectedPose]["faces"]; var columns=parseInt(Math.sqrt(total_images.length)); var rows=parseInt(Math.ceil(total_images.length / columns)); html +="<canvas id='canvas'/><canvas>"; $("#imageList2").append(html); var canvas=document.getElementById("canvas"); var default_outfit=[].concat( character.poses[selectedPose].default_outfit ); if (character.poses[selectedPose].default_accessories.length > 0){default_outfit=default_outfit.concat( character.poses[selectedPose].default_accessories );}const skip_num=default_outfit.length; character.poses[selectedPose].faces=default_outfit.concat( character.poses[selectedPose].faces ); var context=canvas.getContext("2d"); var left_crop=character.poses[selectedPose].default_left_crop; var right_crop=character.poses[selectedPose].default_right_crop; var top_crop=character.poses[selectedPose].default_top_crop; var nheight=parseInt( character.poses[selectedPose].max_face_height * 1.07 - top_crop + rect_height ); var nwidth=right_crop - left_crop; canvas.height=parseInt(nheight + rect_height / 2) * rows; canvas.width=nwidth * columns; loadImages(character.poses[selectedPose].faces, function (images){var current_column=0; var swidth=0; var sheight=0; for (const [index, element] of enumerate( character.poses[selectedPose].faces )){if (index < skip_num){continue;}if (index % 2==1){context.fillStyle="Black";}else{context.fillStyle="#121212";}context.fillRect(swidth, sheight, nwidth, nheight); for (var i=0; i < skip_num; i++){context.drawImage( images[i], left_crop, top_crop, nwidth, nheight, swidth, sheight, nwidth, nheight );}context.drawImage( images[index], left_crop, top_crop, nwidth, nheight, swidth, sheight, nwidth, nheight ); context.font="24pt Calibri"; txt_str=selectedPose + "_" + element .split("/") .pop() .split(".")[0] .replace("%23", "#"); context.fillStyle="white"; context.fillRect( swidth, sheight + nheight - rect_height + 1, nwidth, rect_height ); context.fillStyle="black"; context.fillText( txt_str, (nwidth - getTextWidth(txt_str, context.font)) / 2 + swidth, sheight + nheight ); swidth +=nwidth; current_column++; if (current_column >=columns){sheight +=nheight + rect_height / 2; swidth=0; current_column=0;}}}); html=""; $("#imageList2").append(html); document.title=scenario + " " + selectedCharacter + "_" + selectedPose;}$("body").bind("keydown", function (event){if (event.key=="Backspace" && selectedCharacter !=undefined){history.back();}else if (event.code=="Backslash"){disable_keys=!disable_keys; sessionStorage.setItem("disable_keys", disable_keys); $("#ToggleText").finish(); $("#ToggleText") .text( disable_keys ? "Keyboard shortcuts are disabled." : "Keyboard shortcuts are enabled." ) .fadeIn(1250) .delay(3000) .fadeOut(2000);}else if (disable_keys){}else if (event.key=="ArrowUp"){window.location.href=file_name;}else if (event.key=="ArrowRight"){if (selectedCharacter !=undefined && urlIndex==undefined){testIndex=testArray.findIndex( (element)=> element.toString()==[selectedCharacter, selectedPose].toString() ); testIndex=testIndex==indexLen ? 0 : testIndex + 1; window.location.href=file_name + "?" + makeCharURL(testArray[testIndex]);}else if (urlIndex==undefined){window.location.href=file_name + "?index=0";}else{window.location.href=file_name + "?index=" + (urlIndex - 1 + 2 > indexLen ? 0 : urlIndex - 1 + 2);}}else if (event.key=="ArrowLeft"){if (selectedCharacter !=undefined && urlIndex==undefined){testIndex=testArray.findIndex( (element)=> element.toString()==[selectedCharacter, selectedPose].toString() ); testIndex=testIndex==0 ? indexLen : testIndex - 1; window.location.href=file_name + "?" + makeCharURL(testArray[testIndex]);}else if (urlIndex==undefined){window.location.href=file_name + "?index=0";}else{window.location.href=file_name + "?index=" + (urlIndex - 1 < 0 ? indexLen : urlIndex - 1);}}}); </script></html>